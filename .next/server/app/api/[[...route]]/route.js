"use strict";(()=>{var e={};e.id=162,e.ids=[162],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},74026:e=>{e.exports=require("string_decoder")},6162:e=>{e.exports=require("worker_threads")},98061:e=>{e.exports=require("node:assert")},92761:e=>{e.exports=require("node:async_hooks")},72254:e=>{e.exports=require("node:buffer")},40027:e=>{e.exports=require("node:console")},6005:e=>{e.exports=require("node:crypto")},65714:e=>{e.exports=require("node:diagnostics_channel")},15673:e=>{e.exports=require("node:events")},87561:e=>{e.exports=require("node:fs")},88849:e=>{e.exports=require("node:http")},42725:e=>{e.exports=require("node:http2")},22286:e=>{e.exports=require("node:https")},87503:e=>{e.exports=require("node:net")},70612:e=>{e.exports=require("node:os")},49411:e=>{e.exports=require("node:path")},38846:e=>{e.exports=require("node:perf_hooks")},97742:e=>{e.exports=require("node:process")},39630:e=>{e.exports=require("node:querystring")},84492:e=>{e.exports=require("node:stream")},72477:e=>{e.exports=require("node:stream/web")},31764:e=>{e.exports=require("node:tls")},41041:e=>{e.exports=require("node:url")},47261:e=>{e.exports=require("node:util")},93746:e=>{e.exports=require("node:util/types")},24086:e=>{e.exports=require("node:worker_threads")},65628:e=>{e.exports=require("node:zlib")},97949:(e,t,a)=>{let r;a.r(t),a.d(t,{originalPathname:()=>aM,patchFetch:()=>aF,requestAsyncStorage:()=>aN,routeModule:()=>aR,serverHooks:()=>aZ,staticGenerationAsyncStorage:()=>aP});var s,i,n,o,d,l,u,c,h,p,m,f,g,y,v,w,_,b={};a.r(b),a.d(b,{DELETE:()=>aC,GET:()=>aq,PATCH:()=>aD,POST:()=>a$,runtime:()=>aO});var k=a(73278),E=a(45002),x=a(54877),I=(e,t,a)=>(r,s)=>{let i=-1;return n(0);async function n(o){let d,l;if(o<=i)throw Error("next() called multiple times");i=o;let u=!1;if(e[o]?(l=e[o][0][0],r.req.routeIndex=o):l=o===e.length&&s||void 0,l)try{d=await l(r,()=>n(o+1))}catch(e){if(e instanceof Error&&t)r.error=e,d=await t(e,r),u=!0;else throw e}else!1===r.finalized&&a&&(d=await a(r));return d&&(!1===r.finalized||u)&&(r.res=d),r}},A=async(e,t=Object.create(null))=>{let{all:a=!1,dot:r=!1}=t,s=(e instanceof V?e.raw.headers:e.headers).get("Content-Type");return s?.startsWith("multipart/form-data")||s?.startsWith("application/x-www-form-urlencoded")?S(e,{all:a,dot:r}):{}};async function S(e,t){let a=await e.formData();return a?function(e,t){let a=Object.create(null);return e.forEach((e,r)=>{t.all||r.endsWith("[]")?j(a,r,e):a[r]=e}),t.dot&&Object.entries(a).forEach(([e,t])=>{e.includes(".")&&(O(a,e,t),delete a[e])}),a}(a,t):{}}var j=(e,t,a)=>{void 0!==e[t]?Array.isArray(e[t])?e[t].push(a):e[t]=[e[t],a]:e[t]=a},O=(e,t,a)=>{let r=e,s=t.split(".");s.forEach((e,t)=>{t===s.length-1?r[e]=a:((!r[e]||"object"!=typeof r[e]||Array.isArray(r[e])||r[e]instanceof File)&&(r[e]=Object.create(null)),r=r[e])})},T=e=>{let t=e.split("/");return""===t[0]&&t.shift(),t},q=e=>{let{groups:t,path:a}=$(e);return D(T(a),t)},$=e=>{let t=[];return e=e.replace(/\{[^}]+\}/g,(e,a)=>{let r=`@${a}`;return t.push([r,e]),r}),{groups:t,path:e}},D=(e,t)=>{for(let a=t.length-1;a>=0;a--){let[r]=t[a];for(let s=e.length-1;s>=0;s--)if(e[s].includes(r)){e[s]=e[s].replace(r,t[a][1]);break}}return e},C={},R=(e,t)=>{if("*"===e)return"*";let a=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(a){let r=`${e}#${t}`;return C[r]||(a[2]?C[r]=t&&":"!==t[0]&&"*"!==t[0]?[r,a[1],RegExp(`^${a[2]}(?=/${t})`)]:[e,a[1],RegExp(`^${a[2]}$`)]:C[r]=[e,a[1],!0]),C[r]}return null},N=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,e=>{try{return t(e)}catch{return e}})}},P=e=>N(e,decodeURI),Z=e=>{let t=e.url,a=t.indexOf("/",8),r=a;for(;r<t.length;r++){let e=t.charCodeAt(r);if(37===e){let e=t.indexOf("?",r),s=t.slice(a,-1===e?void 0:e);return P(s.includes("%25")?s.replace(/%25/g,"%2525"):s)}if(63===e)break}return t.slice(a,r)},M=e=>{let t=Z(e);return t.length>1&&"/"===t.at(-1)?t.slice(0,-1):t},F=(e,t,...a)=>(a.length&&(t=F(t,...a)),`${e?.[0]==="/"?"":"/"}${e}${"/"===t?"":`${e?.at(-1)==="/"?"":"/"}${t?.[0]==="/"?t.slice(1):t}`}`),z=e=>{if(63!==e.charCodeAt(e.length-1)||!e.includes(":"))return null;let t=e.split("/"),a=[],r="";return t.forEach(e=>{if(""===e||/\:/.test(e)){if(/\:/.test(e)){if(/\?/.test(e)){0===a.length&&""===r?a.push("/"):a.push(r);let t=e.replace("?","");r+="/"+t,a.push(r)}else r+="/"+e}}else r+="/"+e}),a.filter((e,t,a)=>a.indexOf(e)===t)},L=e=>/[%+]/.test(e)?(-1!==e.indexOf("+")&&(e=e.replace(/\+/g," ")),-1!==e.indexOf("%")?B(e):e):e,U=(e,t,a)=>{let r;if(!a&&t&&!/[%+]/.test(t)){let a=e.indexOf(`?${t}`,8);for(-1===a&&(a=e.indexOf(`&${t}`,8));-1!==a;){let r=e.charCodeAt(a+t.length+1);if(61===r){let r=a+t.length+2,s=e.indexOf("&",r);return L(e.slice(r,-1===s?void 0:s))}if(38==r||isNaN(r))return"";a=e.indexOf(`&${t}`,a+1)}if(!(r=/[%+]/.test(e)))return}let s={};r??=/[%+]/.test(e);let i=e.indexOf("?",8);for(;-1!==i;){let t;let n=e.indexOf("&",i+1),o=e.indexOf("=",i);o>n&&-1!==n&&(o=-1);let d=e.slice(i+1,-1===o?-1===n?void 0:n:o);r&&(d=L(d)),i=n,""!==d&&(-1===o?t="":(t=e.slice(o+1,-1===n?void 0:n),r&&(t=L(t))),a?(s[d]&&Array.isArray(s[d])||(s[d]=[]),s[d].push(t)):s[d]??=t)}return t?s[t]:s},W=(e,t)=>U(e,t,!0),B=decodeURIComponent,H=e=>N(e,B),V=class{raw;#e;#t;routeIndex=0;path;bodyCache={};constructor(e,t="/",a=[[]]){this.raw=e,this.path=t,this.#t=a,this.#e={}}param(e){return e?this.#a(e):this.#r()}#a(e){let t=this.#t[0][this.routeIndex][1][e],a=this.#s(t);return a?/\%/.test(a)?H(a):a:void 0}#r(){let e={};for(let t of Object.keys(this.#t[0][this.routeIndex][1])){let a=this.#s(this.#t[0][this.routeIndex][1][t]);a&&"string"==typeof a&&(e[t]=/\%/.test(a)?H(a):a)}return e}#s(e){return this.#t[1]?this.#t[1][e]:e}query(e){return U(this.url,e)}queries(e){return W(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;let t={};return this.raw.headers.forEach((e,a)=>{t[a]=e}),t}async parseBody(e){return this.bodyCache.parsedBody??=await A(this,e)}#i=e=>{let{bodyCache:t,raw:a}=this,r=t[e];if(r)return r;let s=Object.keys(t)[0];return s?t[s].then(t=>("json"===s&&(t=JSON.stringify(t)),new Response(t)[e]())):t[e]=a[e]()};json(){return this.#i("json")}text(){return this.#i("text")}arrayBuffer(){return this.#i("arrayBuffer")}blob(){return this.#i("blob")}formData(){return this.#i("formData")}addValidatedData(e,t){this.#e[e]=t}valid(e){return this.#e[e]}get url(){return this.raw.url}get method(){return this.raw.method}get matchedRoutes(){return this.#t[0].map(([[,e]])=>e)}get routePath(){return this.#t[0].map(([[,e]])=>e)[this.routeIndex].path}},K={Stringify:1},G=(e,t)=>{let a=new String(e);return a.isEscaped=!0,a.callbacks=t,a},J=async(e,t,a,r,s)=>{"object"==typeof e&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));let i=e.callbacks;if(!i?.length)return Promise.resolve(e);s?s[0]+=e:s=[e];let n=Promise.all(i.map(e=>e({phase:t,buffer:s,context:r}))).then(e=>Promise.all(e.filter(Boolean).map(e=>J(e,t,!1,r,s))).then(()=>s[0]));return a?G(await n,i):n},Y=(e,t={})=>{for(let a of Object.keys(t))e.set(a,t[a]);return e},X=class{#n;#o;env={};#d;finalized=!1;error;#l=200;#u;#c;#h;#p;#m=!0;#f;#g;#y;#t;#v;constructor(e,t){this.#n=e,t&&(this.#u=t.executionCtx,this.env=t.env,this.#y=t.notFoundHandler,this.#v=t.path,this.#t=t.matchResult)}get req(){return this.#o??=new V(this.#n,this.#v,this.#t),this.#o}get event(){if(this.#u&&"respondWith"in this.#u)return this.#u;throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#u)return this.#u;throw Error("This context has no ExecutionContext")}get res(){return this.#m=!1,this.#p||=new Response("404 Not Found",{status:404})}set res(e){if(this.#m=!1,this.#p&&e){for(let[t,a]of(e=new Response(e.body,e),this.#p.headers.entries()))if("content-type"!==t){if("set-cookie"===t){let t=this.#p.headers.getSetCookie();for(let a of(e.headers.delete("set-cookie"),t))e.headers.append("set-cookie",a)}else e.headers.set(t,a)}}this.#p=e,this.finalized=!0}render=(...e)=>(this.#g??=e=>this.html(e),this.#g(...e));setLayout=e=>this.#f=e;getLayout=()=>this.#f;setRenderer=e=>{this.#g=e};header=(e,t,a)=>{if(this.finalized&&(this.#p=new Response(this.#p.body,this.#p)),void 0===t){this.#c?this.#c.delete(e):this.#h&&delete this.#h[e.toLocaleLowerCase()],this.finalized&&this.res.headers.delete(e);return}a?.append?(this.#c||(this.#m=!1,this.#c=new Headers(this.#h),this.#h={}),this.#c.append(e,t)):this.#c?this.#c.set(e,t):(this.#h??={},this.#h[e.toLowerCase()]=t),this.finalized&&(a?.append?this.res.headers.append(e,t):this.res.headers.set(e,t))};status=e=>{this.#m=!1,this.#l=e};set=(e,t)=>{this.#d??=new Map,this.#d.set(e,t)};get=e=>this.#d?this.#d.get(e):void 0;get var(){return this.#d?Object.fromEntries(this.#d):{}}#w(e,t,a){if(this.#m&&!a&&!t&&200===this.#l)return new Response(e,{headers:this.#h});if(t&&"number"!=typeof t){let a=new Headers(t.headers);return this.#c&&this.#c.forEach((e,t)=>{"set-cookie"===t?a.append(t,e):a.set(t,e)}),new Response(e,{headers:Y(a,this.#h),status:t.status??this.#l})}let r="number"==typeof t?t:this.#l;for(let[e,t]of(this.#h??={},this.#c??=new Headers,Y(this.#c,this.#h),this.#p&&(this.#p.headers.forEach((e,t)=>{"set-cookie"===t?this.#c?.append(t,e):this.#c?.set(t,e)}),Y(this.#c,this.#h)),Object.entries(a??={})))if("string"==typeof t)this.#c.set(e,t);else for(let a of(this.#c.delete(e),t))this.#c.append(e,a);return new Response(e,{status:r,headers:this.#c})}newResponse=(...e)=>this.#w(...e);body=(e,t,a)=>"number"==typeof t?this.#w(e,t,a):this.#w(e,t);text=(e,t,a)=>{if(!this.#h){if(this.#m&&!a&&!t)return new Response(e);this.#h={}}return(this.#h["content-type"]="text/plain; charset=UTF-8","number"==typeof t)?this.#w(e,t,a):this.#w(e,t)};json=(e,t,a)=>{let r=JSON.stringify(e);return this.#h??={},this.#h["content-type"]="application/json","number"==typeof t?this.#w(r,t,a):this.#w(r,t)};html=(e,t,a)=>(this.#h??={},this.#h["content-type"]="text/html; charset=UTF-8","object"==typeof e)?J(e,K.Stringify,!1,{}).then(e=>"number"==typeof t?this.#w(e,t,a):this.#w(e,t)):"number"==typeof t?this.#w(e,t,a):this.#w(e,t);redirect=(e,t)=>(this.#c??=new Headers,this.#c.set("Location",String(e)),this.newResponse(null,t??302));notFound=()=>(this.#y??=()=>new Response,this.#y(this))},Q=["get","post","put","delete","options","patch"],ee="Can not add a route since the matcher is already built.",et=class extends Error{},ea=e=>e.text("404 Not Found",404),er=(e,t)=>{if("getResponse"in e){let a=e.getResponse();return t.newResponse(a.body,a)}return console.error(e),t.text("Internal Server Error",500)},es=class{get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#v="/";routes=[];constructor(e={}){[...Q,"all"].forEach(e=>{this[e]=(t,...a)=>("string"==typeof t?this.#v=t:this.#_(e,this.#v,t),a.forEach(t=>{this.#_(e,this.#v,t)}),this)}),this.on=(e,t,...a)=>{for(let r of[t].flat())for(let t of(this.#v=r,[e].flat()))a.map(e=>{this.#_(t.toUpperCase(),this.#v,e)});return this},this.use=(e,...t)=>("string"==typeof e?this.#v=e:(this.#v="*",t.unshift(e)),t.forEach(e=>{this.#_("ALL",this.#v,e)}),this);let{strict:t,...a}=e;Object.assign(this,a),this.getPath=t??!0?e.getPath??Z:M}#b(){let e=new es({router:this.router,getPath:this.getPath});return e.errorHandler=this.errorHandler,e.#y=this.#y,e.routes=this.routes,e}#y=ea;errorHandler=er;route(e,t){let a=this.basePath(e);return t.routes.map(e=>{let r;t.errorHandler===er?r=e.handler:(r=async(a,r)=>(await I([],t.errorHandler)(a,()=>e.handler(a,r))).res).__COMPOSED_HANDLER=e.handler,a.#_(e.method,e.path,r)}),this}basePath(e){let t=this.#b();return t._basePath=F(this._basePath,e),t}onError=e=>(this.errorHandler=e,this);notFound=e=>(this.#y=e,this);mount(e,t,a){let r,s;a&&("function"==typeof a?s=a:(s=a.optionHandler,r=!1===a.replaceRequest?e=>e:a.replaceRequest));let i=s?e=>{let t=s(e);return Array.isArray(t)?t:[t]}:e=>{let t;try{t=e.executionCtx}catch{}return[e.env,t]};r||=(()=>{let t=F(this._basePath,e),a="/"===t?0:t.length;return e=>{let t=new URL(e.url);return t.pathname=t.pathname.slice(a)||"/",new Request(t,e)}})();let n=async(e,a)=>{let s=await t(r(e.req.raw),...i(e));if(s)return s;await a()};return this.#_("ALL",F(e,"*"),n),this}#_(e,t,a){e=e.toUpperCase();let r={path:t=F(this._basePath,t),method:e,handler:a};this.router.add(e,t,[a,r]),this.routes.push(r)}#k(e,t){if(e instanceof Error)return this.errorHandler(e,t);throw e}#E(e,t,a,r){if("HEAD"===r)return(async()=>new Response(null,await this.#E(e,t,a,"GET")))();let s=this.getPath(e,{env:a}),i=this.router.match(r,s),n=new X(e,{path:s,matchResult:i,env:a,executionCtx:t,notFoundHandler:this.#y});if(1===i[0].length){let e;try{e=i[0][0][0][0](n,async()=>{n.res=await this.#y(n)})}catch(e){return this.#k(e,n)}return e instanceof Promise?e.then(e=>e||(n.finalized?n.res:this.#y(n))).catch(e=>this.#k(e,n)):e??this.#y(n)}let o=I(i[0],this.errorHandler,this.#y);return(async()=>{try{let e=await o(n);if(!e.finalized)throw Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return e.res}catch(e){return this.#k(e,n)}})()}fetch=(e,...t)=>this.#E(e,t[1],t[0],e.method);request=(e,t,a,r)=>e instanceof Request?this.fetch(t?new Request(e,t):e,a,r):(e=e.toString(),this.fetch(new Request(/^https?:\/\//.test(e)?e:`http://localhost${F("/",e)}`,t),a,r));fire=()=>{addEventListener("fetch",e=>{e.respondWith(this.#E(e.request,e,void 0,e.request.method))})}},ei="[^/]+",en="(?:|/.*)",eo=Symbol(),ed=new Set(".\\+*[^]$()");function el(e,t){return 1===e.length?1===t.length?e<t?-1:1:-1:1===t.length?1:".*"===e||e===en?1:".*"===t||t===en?-1:e===ei?1:t===ei?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var eu=class{#x;#I;#A=Object.create(null);insert(e,t,a,r,s){let i;if(0===e.length){if(void 0!==this.#x)throw eo;if(s)return;this.#x=t;return}let[n,...o]=e,d="*"===n?0===o.length?["","",".*"]:["","",ei]:"/*"===n?["","",en]:n.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(d){let e=d[1],t=d[2]||ei;if(e&&d[2]&&(t=t.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(t)))throw eo;if(!(i=this.#A[t])){if(Object.keys(this.#A).some(e=>".*"!==e&&e!==en))throw eo;if(s)return;i=this.#A[t]=new eu,""!==e&&(i.#I=r.varIndex++)}s||""===e||a.push([e,i.#I])}else if(!(i=this.#A[n])){if(Object.keys(this.#A).some(e=>e.length>1&&".*"!==e&&e!==en))throw eo;if(s)return;i=this.#A[n]=new eu}i.insert(o,t,a,r,s)}buildRegExpStr(){let e=Object.keys(this.#A).sort(el).map(e=>{let t=this.#A[e];return("number"==typeof t.#I?`(${e})@${t.#I}`:ed.has(e)?`\\${e}`:e)+t.buildRegExpStr()});return("number"==typeof this.#x&&e.unshift(`#${this.#x}`),0===e.length)?"":1===e.length?e[0]:"(?:"+e.join("|")+")"}},ec=class{#S={varIndex:0};#j=new eu;insert(e,t,a){let r=[],s=[];for(let t=0;;){let a=!1;if(e=e.replace(/\{[^}]+\}/g,e=>{let r=`@\\${t}`;return s[t]=[r,e],t++,a=!0,r}),!a)break}let i=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let e=s.length-1;e>=0;e--){let[t]=s[e];for(let a=i.length-1;a>=0;a--)if(-1!==i[a].indexOf(t)){i[a]=i[a].replace(t,s[e][1]);break}}return this.#j.insert(i,t,r,this.#S,a),r}buildRegExp(){let e=this.#j.buildRegExpStr();if(""===e)return[/^$/,[],[]];let t=0,a=[],r=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(e,s,i)=>void 0!==s?(a[++t]=Number(s),"$()"):(void 0!==i&&(r[Number(i)]=++t),"")),[RegExp(`^${e}`),a,r]}},eh=[],ep=[/^$/,[],Object.create(null)],em=Object.create(null);function ef(e){return em[e]??=new RegExp("*"===e?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(e,t)=>t?`\\${t}`:"(?:|/.*)")}$`)}function eg(e,t){if(e){for(let a of Object.keys(e).sort((e,t)=>t.length-e.length))if(ef(a).test(t))return[...e[a]]}}var ey=class{name="RegExpRouter";#O;#T;constructor(){this.#O={ALL:Object.create(null)},this.#T={ALL:Object.create(null)}}add(e,t,a){let r=this.#O,s=this.#T;if(!r||!s)throw Error(ee);r[e]||[r,s].forEach(t=>{t[e]=Object.create(null),Object.keys(t.ALL).forEach(a=>{t[e][a]=[...t.ALL[a]]})}),"/*"===t&&(t="*");let i=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){let n=ef(t);"ALL"===e?Object.keys(r).forEach(e=>{r[e][t]||=eg(r[e],t)||eg(r.ALL,t)||[]}):r[e][t]||=eg(r[e],t)||eg(r.ALL,t)||[],Object.keys(r).forEach(t=>{("ALL"===e||e===t)&&Object.keys(r[t]).forEach(e=>{n.test(e)&&r[t][e].push([a,i])})}),Object.keys(s).forEach(t=>{("ALL"===e||e===t)&&Object.keys(s[t]).forEach(e=>n.test(e)&&s[t][e].push([a,i]))});return}let n=z(t)||[t];for(let t=0,o=n.length;t<o;t++){let d=n[t];Object.keys(s).forEach(n=>{("ALL"===e||e===n)&&(s[n][d]||=[...eg(r[n],d)||eg(r.ALL,d)||[]],s[n][d].push([a,i-o+t+1]))})}}match(e,t){em=Object.create(null);let a=this.#q();return this.match=(e,t)=>{let r=a[e]||a.ALL,s=r[2][t];if(s)return s;let i=t.match(r[0]);if(!i)return[[],eh];let n=i.indexOf("",1);return[r[1][n],i]},this.match(e,t)}#q(){let e=Object.create(null);return Object.keys(this.#T).concat(Object.keys(this.#O)).forEach(t=>{e[t]||=this.#$(t)}),this.#O=this.#T=void 0,e}#$(e){let t=[],a="ALL"===e;return([this.#O,this.#T].forEach(r=>{let s=r[e]?Object.keys(r[e]).map(t=>[t,r[e][t]]):[];0!==s.length?(a||=!0,t.push(...s)):"ALL"!==e&&t.push(...Object.keys(r.ALL).map(e=>[e,r.ALL[e]]))}),a)?function(e){let t=new ec,a=[];if(0===e.length)return ep;let r=e.map(e=>[!/\*|\/:/.test(e[0]),...e]).sort(([e,t],[a,r])=>e?1:a?-1:t.length-r.length),s=Object.create(null);for(let e=0,i=-1,n=r.length;e<n;e++){let n;let[o,d,l]=r[e];o?s[d]=[l.map(([e])=>[e,Object.create(null)]),eh]:i++;try{n=t.insert(d,i,o)}catch(e){throw e===eo?new et(d):e}o||(a[i]=l.map(([e,t])=>{let a=Object.create(null);for(t-=1;t>=0;t--){let[e,r]=n[t];a[e]=r}return[e,a]}))}let[i,n,o]=t.buildRegExp();for(let e=0,t=a.length;e<t;e++)for(let t=0,r=a[e].length;t<r;t++){let r=a[e][t]?.[1];if(!r)continue;let s=Object.keys(r);for(let e=0,t=s.length;e<t;e++)r[s[e]]=o[r[s[e]]]}let d=[];for(let e in n)d[e]=a[n[e]];return[i,d,s]}(t):null}},ev=class{name="SmartRouter";#D=[];#T=[];constructor(e){this.#D=e.routers}add(e,t,a){if(!this.#T)throw Error(ee);this.#T.push([e,t,a])}match(e,t){let a;if(!this.#T)throw Error("Fatal error");let r=this.#D,s=this.#T,i=r.length,n=0;for(;n<i;n++){let i=r[n];try{for(let e=0,t=s.length;e<t;e++)i.add(...s[e]);a=i.match(e,t)}catch(e){if(e instanceof et)continue;throw e}this.match=i.match.bind(i),this.#D=[i],this.#T=void 0;break}if(n===i)throw Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,a}get activeRouter(){if(this.#T||1!==this.#D.length)throw Error("No active router has been determined yet.");return this.#D[0]}},ew=Object.create(null),e_=class{#C;#A;#R;#N=0;#P=ew;constructor(e,t,a){if(this.#A=a||Object.create(null),this.#C=[],e&&t){let a=Object.create(null);a[e]={handler:t,possibleKeys:[],score:0},this.#C=[a]}this.#R=[]}insert(e,t,a){this.#N=++this.#N;let r=this,s=q(t),i=[];for(let e=0,t=s.length;e<t;e++){let t=s[e],a=s[e+1],n=R(t,a),o=Array.isArray(n)?n[0]:t;if(Object.keys(r.#A).includes(o)){r=r.#A[o];let e=R(t,a);e&&i.push(e[1]);continue}r.#A[o]=new e_,n&&(r.#R.push(n),i.push(n[1])),r=r.#A[o]}let n=Object.create(null),o={handler:a,possibleKeys:i.filter((e,t,a)=>a.indexOf(e)===t),score:this.#N};return n[e]=o,r.#C.push(n),r}#Z(e,t,a,r){let s=[];for(let i=0,n=e.#C.length;i<n;i++){let n=e.#C[i],o=n[t]||n.ALL,d={};if(void 0!==o&&(o.params=Object.create(null),s.push(o),a!==ew||r&&r!==ew))for(let e=0,t=o.possibleKeys.length;e<t;e++){let t=o.possibleKeys[e],s=d[o.score];o.params[t]=r?.[t]&&!s?r[t]:a[t]??r?.[t],d[o.score]=!0}}return s}search(e,t){let a=[];this.#P=ew;let r=[this],s=T(t),i=[];for(let t=0,n=s.length;t<n;t++){let o=s[t],d=t===n-1,l=[];for(let n=0,u=r.length;n<u;n++){let u=r[n],c=u.#A[o];c&&(c.#P=u.#P,d?(c.#A["*"]&&a.push(...this.#Z(c.#A["*"],e,u.#P)),a.push(...this.#Z(c,e,u.#P))):l.push(c));for(let r=0,n=u.#R.length;r<n;r++){let n=u.#R[r],c=u.#P===ew?{}:{...u.#P};if("*"===n){let t=u.#A["*"];t&&(a.push(...this.#Z(t,e,u.#P)),t.#P=c,l.push(t));continue}if(""===o)continue;let[h,p,m]=n,f=u.#A[h],g=s.slice(t).join("/");if(m instanceof RegExp){let t=m.exec(g);if(t){if(c[p]=t[0],a.push(...this.#Z(f,e,u.#P,c)),Object.keys(f.#A).length){f.#P=c;let e=t[0].match(/\//)?.length??0;(i[e]||=[]).push(f)}continue}}(!0===m||m.test(o))&&(c[p]=o,d?(a.push(...this.#Z(f,e,c,u.#P)),f.#A["*"]&&a.push(...this.#Z(f.#A["*"],e,c,u.#P))):(f.#P=c,l.push(f)))}}r=l.concat(i.shift()??[])}return a.length>1&&a.sort((e,t)=>e.score-t.score),[a.map(({handler:e,params:t})=>[e,t])]}},eb=class{name="TrieRouter";#M;constructor(){this.#M=new e_}add(e,t,a){let r=z(t);if(r){for(let t=0,s=r.length;t<s;t++)this.#M.insert(e,r[t],a);return}this.#M.insert(e,t,a)}match(e,t){return this.#M.search(e,t)}},ek=class extends es{constructor(e={}){super(e),this.router=e.router??new ev({routers:[new ey,new eb]})}},eE=e=>t=>e.fetch(t),ex={name:"HMAC",hash:"SHA-256"},eI=/^[\w!#$%&'*.^`|~+-]+$/,eA=/^[ !#-:<-[\]-~]*$/,eS=(e,t)=>{if(t&&-1===e.indexOf(t))return{};let a=e.trim().split(";"),r={};for(let e of a){let a=(e=e.trim()).indexOf("=");if(-1===a)continue;let s=e.substring(0,a).trim();if(t&&t!==s||!eI.test(s))continue;let i=e.substring(a+1).trim();if(i.startsWith('"')&&i.endsWith('"')&&(i=i.slice(1,-1)),eA.test(i)&&(r[s]=B(i),t))break}return r},ej=(e,t,a={})=>{let r=`${e}=${t}`;if(e.startsWith("__Secure-")&&!a.secure)throw Error("__Secure- Cookie must have Secure attributes");if(e.startsWith("__Host-")){if(!a.secure)throw Error("__Host- Cookie must have Secure attributes");if("/"!==a.path)throw Error('__Host- Cookie must have Path attributes with "/"');if(a.domain)throw Error("__Host- Cookie must not have Domain attributes")}if(a&&"number"==typeof a.maxAge&&a.maxAge>=0){if(a.maxAge>3456e4)throw Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");r+=`; Max-Age=${0|a.maxAge}`}if(a.domain&&"host"!==a.prefix&&(r+=`; Domain=${a.domain}`),a.path&&(r+=`; Path=${a.path}`),a.expires){if(a.expires.getTime()-Date.now()>3456e7)throw Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");r+=`; Expires=${a.expires.toUTCString()}`}if(a.httpOnly&&(r+="; HttpOnly"),a.secure&&(r+="; Secure"),a.sameSite&&(r+=`; SameSite=${a.sameSite.charAt(0).toUpperCase()+a.sameSite.slice(1)}`),a.priority&&(r+=`; Priority=${a.priority}`),a.partitioned){if(!a.secure)throw Error("Partitioned Cookie must have Secure attributes");r+="; Partitioned"}return r},eO=(e,t,a)=>ej(e,t=encodeURIComponent(t),a),eT=(e,t,a)=>{let r=e.req.raw.headers.get("Cookie");if("string"==typeof t){if(!r)return;let e=t;return"secure"===a?e="__Secure-"+t:"host"===a&&(e="__Host-"+t),eS(r,e)[e]}return r?eS(r):{}},eq=(e,t,a,r)=>{let s;s=r?.prefix==="secure"?eO("__Secure-"+t,a,{path:"/",...r,secure:!0}):r?.prefix==="host"?eO("__Host-"+t,a,{...r,path:"/",secure:!0,domain:void 0}):eO(t,a,{path:"/",...r}),e.header("Set-Cookie",s,{append:!0})},e$=(e,t,a)=>{let r=eT(e,t,a?.prefix);return eq(e,t,"",{...a,maxAge:0}),r},eD=class extends Error{res;status;constructor(e=500,t){super(t?.message,{cause:t?.cause}),this.res=t?.res,this.status=e}getResponse(){return this.res?new Response(this.res.body,{status:this.status,headers:this.res.headers}):new Response(this.message,{status:this.status})}},eC=(e,t)=>new Response(e,{headers:{"Content-Type":t}}).formData(),eR=/^application\/([a-z-\.]+\+)?json(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,eN=/^multipart\/form-data(;\s?boundary=[a-zA-Z0-9'"()+_,\-./:=?]+)?$/,eP=/^application\/x-www-form-urlencoded(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,eZ=(e,t)=>async(a,r)=>{let s={},i=a.req.header("Content-Type");switch(e){case"json":if(!i||!eR.test(i))break;try{s=await a.req.json()}catch{throw new eD(400,{message:"Malformed JSON in request body"})}break;case"form":{let e;if(!i||!(eN.test(i)||eP.test(i)))break;if(a.req.bodyCache.formData)e=await a.req.bodyCache.formData;else try{let t=await a.req.arrayBuffer();e=await eC(t,i),a.req.bodyCache.formData=e}catch(t){let e="Malformed FormData request.";throw new eD(400,{message:e+=t instanceof Error?` ${t.message}`:` ${String(t)}`})}let t={};e.forEach((e,a)=>{a.endsWith("[]")?(t[a]??=[]).push(e):Array.isArray(t[a])?t[a].push(e):a in t?t[a]=[t[a],e]:t[a]=e}),s=t;break}case"query":s=Object.fromEntries(Object.entries(a.req.queries()).map(([e,t])=>1===t.length?[e,t[0]]:[e,t]));break;case"param":s=a.req.param();break;case"header":s=a.req.header();break;case"cookie":s=eT(a)}let n=await t(s,a);if(n instanceof Response)return n;a.req.addValidatedData(e,n),await r()};(function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let a of e)t[a]=a;return t},e.getValidEnumValues=t=>{let a=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),r={};for(let e of a)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.push(a);return t},e.find=(e,t)=>{for(let a of e)if(t(a))return a},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t})(s||(s={})),(i||(i={})).mergeShapes=(e,t)=>({...e,...t});let eM=s.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),eF=e=>{switch(typeof e){case"undefined":return eM.undefined;case"string":return eM.string;case"number":return Number.isNaN(e)?eM.nan:eM.number;case"boolean":return eM.boolean;case"function":return eM.function;case"bigint":return eM.bigint;case"symbol":return eM.symbol;case"object":if(Array.isArray(e))return eM.array;if(null===e)return eM.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return eM.promise;if("undefined"!=typeof Map&&e instanceof Map)return eM.map;if("undefined"!=typeof Set&&e instanceof Set)return eM.set;if("undefined"!=typeof Date&&e instanceof Date)return eM.date;return eM.object;default:return eM.unknown}},ez=s.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class eL extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},a={_errors:[]},r=e=>{for(let s of e.issues)if("invalid_union"===s.code)s.unionErrors.map(r);else if("invalid_return_type"===s.code)r(s.returnTypeError);else if("invalid_arguments"===s.code)r(s.argumentsError);else if(0===s.path.length)a._errors.push(t(s));else{let e=a,r=0;for(;r<s.path.length;){let a=s.path[r];r===s.path.length-1?(e[a]=e[a]||{_errors:[]},e[a]._errors.push(t(s))):e[a]=e[a]||{_errors:[]},e=e[a],r++}}};return r(this),a}static assert(e){if(!(e instanceof eL))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,s.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},a=[];for(let r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):a.push(e(r));return{formErrors:a,fieldErrors:t}}get formErrors(){return this.flatten()}}eL.create=e=>new eL(e);let eU=(e,t)=>{let a;switch(e.code){case ez.invalid_type:a=e.received===eM.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case ez.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(e.expected,s.jsonStringifyReplacer)}`;break;case ez.unrecognized_keys:a=`Unrecognized key(s) in object: ${s.joinValues(e.keys,", ")}`;break;case ez.invalid_union:a="Invalid input";break;case ez.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${s.joinValues(e.options)}`;break;case ez.invalid_enum_value:a=`Invalid enum value. Expected ${s.joinValues(e.options)}, received '${e.received}'`;break;case ez.invalid_arguments:a="Invalid function arguments";break;case ez.invalid_return_type:a="Invalid function return type";break;case ez.invalid_date:a="Invalid date";break;case ez.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(a=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(a=`${a} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?a=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?a=`Invalid input: must end with "${e.validation.endsWith}"`:s.assertNever(e.validation):a="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case ez.too_small:a="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case ez.too_big:a="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case ez.custom:a="Invalid input";break;case ez.invalid_intersection_types:a="Intersection results could not be merged";break;case ez.not_multiple_of:a=`Number must be a multiple of ${e.multipleOf}`;break;case ez.not_finite:a="Number must be finite";break;default:a=t.defaultError,s.assertNever(e)}return{message:a}},eW=e=>{let{data:t,path:a,errorMaps:r,issueData:s}=e,i=[...a,...s.path||[]],n={...s,path:i};if(void 0!==s.message)return{...s,path:i,message:s.message};let o="";for(let e of r.filter(e=>!!e).slice().reverse())o=e(n,{data:t,defaultError:o}).message;return{...s,path:i,message:o}};function eB(e,t){let a=eW({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,eU,eU==eU?void 0:eU].filter(e=>!!e)});e.common.issues.push(a)}class eH{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let a=[];for(let r of t){if("aborted"===r.status)return eV;"dirty"===r.status&&e.dirty(),a.push(r.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,t){let a=[];for(let e of t){let t=await e.key,r=await e.value;a.push({key:t,value:r})}return eH.mergeObjectSync(e,a)}static mergeObjectSync(e,t){let a={};for(let r of t){let{key:t,value:s}=r;if("aborted"===t.status||"aborted"===s.status)return eV;"dirty"===t.status&&e.dirty(),"dirty"===s.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==s.value||r.alwaysSet)&&(a[t.value]=s.value)}return{status:e.value,value:a}}}let eV=Object.freeze({status:"aborted"}),eK=e=>({status:"dirty",value:e}),eG=e=>({status:"valid",value:e}),eJ=e=>"aborted"===e.status,eY=e=>"dirty"===e.status,eX=e=>"valid"===e.status,eQ=e=>"undefined"!=typeof Promise&&e instanceof Promise;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(n||(n={}));class e0{constructor(e,t,a,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=a,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let e1=(e,t)=>{if(eX(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new eL(e.common.issues);return this._error=t,this._error}}};function e4(e){if(!e)return{};let{errorMap:t,invalid_type_error:a,required_error:r,description:s}=e;if(t&&(a||r))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:s}:{errorMap:(t,s)=>{let{message:i}=e;return"invalid_enum_value"===t.code?{message:i??s.defaultError}:void 0===s.data?{message:i??r??s.defaultError}:"invalid_type"!==t.code?{message:s.defaultError}:{message:i??a??s.defaultError}},description:s}}class e9{get description(){return this._def.description}_getType(e){return eF(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:eF(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new eH,ctx:{common:e.parent.common,data:e.data,parsedType:eF(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(eQ(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let a=this.safeParse(e,t);if(a.success)return a.data;throw a.error}safeParse(e,t){let a={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eF(e)},r=this._parseSync({data:e,path:a.path,parent:a});return e1(a,r)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eF(e)};if(!this["~standard"].async)try{let a=this._parseSync({data:e,path:[],parent:t});return eX(a)?{value:a.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>eX(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let a=await this.safeParseAsync(e,t);if(a.success)return a.data;throw a.error}async safeParseAsync(e,t){let a={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eF(e)},r=this._parse({data:e,path:a.path,parent:a});return e1(a,await (eQ(r)?r:Promise.resolve(r)))}refine(e,t){let a=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{let s=e(t),i=()=>r.addIssue({code:ez.custom,...a(t)});return"undefined"!=typeof Promise&&s instanceof Promise?s.then(e=>!!e||(i(),!1)):!!s||(i(),!1)})}refinement(e,t){return this._refinement((a,r)=>!!e(a)||(r.addIssue("function"==typeof t?t(a,r):t),!1))}_refinement(e){return new tF({schema:this,typeName:o.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return tz.create(this,this._def)}nullable(){return tL.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return tE.create(this)}promise(){return tM.create(this,this._def)}or(e){return tI.create([this,e],this._def)}and(e){return tj.create(this,e,this._def)}transform(e){return new tF({...e4(this._def),schema:this,typeName:o.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new tU({...e4(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:o.ZodDefault})}brand(){return new tH({typeName:o.ZodBranded,type:this,...e4(this._def)})}catch(e){return new tW({...e4(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:o.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return tV.create(this,e)}readonly(){return tK.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let e2=/^c[^\s-]{8,}$/i,e5=/^[0-9a-z]+$/,e6=/^[0-9A-HJKMNP-TV-Z]{26}$/i,e3=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,e8=/^[a-z0-9_-]{21}$/i,e7=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,te=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,tt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ta=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,tr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ts=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ti=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,tn=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,to=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,td="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",tl=RegExp(`^${td}$`);function tu(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let a=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${a}`}class tc extends e9{_parse(e){var t,a,i,n;let o;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==eM.string){let t=this._getOrReturnCtx(e);return eB(t,{code:ez.invalid_type,expected:eM.string,received:t.parsedType}),eV}let d=new eH;for(let l of this._def.checks)if("min"===l.kind)e.data.length<l.value&&(eB(o=this._getOrReturnCtx(e,o),{code:ez.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),d.dirty());else if("max"===l.kind)e.data.length>l.value&&(eB(o=this._getOrReturnCtx(e,o),{code:ez.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),d.dirty());else if("length"===l.kind){let t=e.data.length>l.value,a=e.data.length<l.value;(t||a)&&(o=this._getOrReturnCtx(e,o),t?eB(o,{code:ez.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):a&&eB(o,{code:ez.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),d.dirty())}else if("email"===l.kind)tt.test(e.data)||(eB(o=this._getOrReturnCtx(e,o),{validation:"email",code:ez.invalid_string,message:l.message}),d.dirty());else if("emoji"===l.kind)r||(r=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),r.test(e.data)||(eB(o=this._getOrReturnCtx(e,o),{validation:"emoji",code:ez.invalid_string,message:l.message}),d.dirty());else if("uuid"===l.kind)e3.test(e.data)||(eB(o=this._getOrReturnCtx(e,o),{validation:"uuid",code:ez.invalid_string,message:l.message}),d.dirty());else if("nanoid"===l.kind)e8.test(e.data)||(eB(o=this._getOrReturnCtx(e,o),{validation:"nanoid",code:ez.invalid_string,message:l.message}),d.dirty());else if("cuid"===l.kind)e2.test(e.data)||(eB(o=this._getOrReturnCtx(e,o),{validation:"cuid",code:ez.invalid_string,message:l.message}),d.dirty());else if("cuid2"===l.kind)e5.test(e.data)||(eB(o=this._getOrReturnCtx(e,o),{validation:"cuid2",code:ez.invalid_string,message:l.message}),d.dirty());else if("ulid"===l.kind)e6.test(e.data)||(eB(o=this._getOrReturnCtx(e,o),{validation:"ulid",code:ez.invalid_string,message:l.message}),d.dirty());else if("url"===l.kind)try{new URL(e.data)}catch{eB(o=this._getOrReturnCtx(e,o),{validation:"url",code:ez.invalid_string,message:l.message}),d.dirty()}else"regex"===l.kind?(l.regex.lastIndex=0,l.regex.test(e.data)||(eB(o=this._getOrReturnCtx(e,o),{validation:"regex",code:ez.invalid_string,message:l.message}),d.dirty())):"trim"===l.kind?e.data=e.data.trim():"includes"===l.kind?e.data.includes(l.value,l.position)||(eB(o=this._getOrReturnCtx(e,o),{code:ez.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),d.dirty()):"toLowerCase"===l.kind?e.data=e.data.toLowerCase():"toUpperCase"===l.kind?e.data=e.data.toUpperCase():"startsWith"===l.kind?e.data.startsWith(l.value)||(eB(o=this._getOrReturnCtx(e,o),{code:ez.invalid_string,validation:{startsWith:l.value},message:l.message}),d.dirty()):"endsWith"===l.kind?e.data.endsWith(l.value)||(eB(o=this._getOrReturnCtx(e,o),{code:ez.invalid_string,validation:{endsWith:l.value},message:l.message}),d.dirty()):"datetime"===l.kind?(function(e){let t=`${td}T${tu(e)}`,a=[];return a.push(e.local?"Z?":"Z"),e.offset&&a.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${a.join("|")})`,RegExp(`^${t}$`)})(l).test(e.data)||(eB(o=this._getOrReturnCtx(e,o),{code:ez.invalid_string,validation:"datetime",message:l.message}),d.dirty()):"date"===l.kind?tl.test(e.data)||(eB(o=this._getOrReturnCtx(e,o),{code:ez.invalid_string,validation:"date",message:l.message}),d.dirty()):"time"===l.kind?RegExp(`^${tu(l)}$`).test(e.data)||(eB(o=this._getOrReturnCtx(e,o),{code:ez.invalid_string,validation:"time",message:l.message}),d.dirty()):"duration"===l.kind?te.test(e.data)||(eB(o=this._getOrReturnCtx(e,o),{validation:"duration",code:ez.invalid_string,message:l.message}),d.dirty()):"ip"===l.kind?(t=e.data,("v4"===(a=l.version)||!a)&&ta.test(t)||("v6"===a||!a)&&ts.test(t)||(eB(o=this._getOrReturnCtx(e,o),{validation:"ip",code:ez.invalid_string,message:l.message}),d.dirty())):"jwt"===l.kind?!function(e,t){if(!e7.test(e))return!1;try{let[a]=e.split("."),r=a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+(4-a.length%4)%4,"="),s=JSON.parse(atob(r));if("object"!=typeof s||null===s||"typ"in s&&s?.typ!=="JWT"||!s.alg||t&&s.alg!==t)return!1;return!0}catch{return!1}}(e.data,l.alg)&&(eB(o=this._getOrReturnCtx(e,o),{validation:"jwt",code:ez.invalid_string,message:l.message}),d.dirty()):"cidr"===l.kind?(i=e.data,("v4"===(n=l.version)||!n)&&tr.test(i)||("v6"===n||!n)&&ti.test(i)||(eB(o=this._getOrReturnCtx(e,o),{validation:"cidr",code:ez.invalid_string,message:l.message}),d.dirty())):"base64"===l.kind?tn.test(e.data)||(eB(o=this._getOrReturnCtx(e,o),{validation:"base64",code:ez.invalid_string,message:l.message}),d.dirty()):"base64url"===l.kind?to.test(e.data)||(eB(o=this._getOrReturnCtx(e,o),{validation:"base64url",code:ez.invalid_string,message:l.message}),d.dirty()):s.assertNever(l);return{status:d.value,value:e.data}}_regex(e,t,a){return this.refinement(t=>e.test(t),{validation:t,code:ez.invalid_string,...n.errToObj(a)})}_addCheck(e){return new tc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...n.errToObj(e)})}url(e){return this._addCheck({kind:"url",...n.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...n.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...n.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...n.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...n.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...n.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...n.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...n.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...n.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...n.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...n.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...n.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...n.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...n.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...n.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...n.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...n.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...n.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...n.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...n.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...n.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...n.errToObj(t)})}nonempty(e){return this.min(1,n.errToObj(e))}trim(){return new tc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new tc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new tc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}tc.create=e=>new tc({checks:[],typeName:o.ZodString,coerce:e?.coerce??!1,...e4(e)});class th extends e9{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==eM.number){let t=this._getOrReturnCtx(e);return eB(t,{code:ez.invalid_type,expected:eM.number,received:t.parsedType}),eV}let a=new eH;for(let r of this._def.checks)"int"===r.kind?s.isInteger(e.data)||(eB(t=this._getOrReturnCtx(e,t),{code:ez.invalid_type,expected:"integer",received:"float",message:r.message}),a.dirty()):"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(eB(t=this._getOrReturnCtx(e,t),{code:ez.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(eB(t=this._getOrReturnCtx(e,t),{code:ez.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):"multipleOf"===r.kind?0!==function(e,t){let a=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=a>r?a:r;return Number.parseInt(e.toFixed(s).replace(".",""))%Number.parseInt(t.toFixed(s).replace(".",""))/10**s}(e.data,r.value)&&(eB(t=this._getOrReturnCtx(e,t),{code:ez.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(eB(t=this._getOrReturnCtx(e,t),{code:ez.not_finite,message:r.message}),a.dirty()):s.assertNever(r);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,n.toString(t))}gt(e,t){return this.setLimit("min",e,!1,n.toString(t))}lte(e,t){return this.setLimit("max",e,!0,n.toString(t))}lt(e,t){return this.setLimit("max",e,!1,n.toString(t))}setLimit(e,t,a,r){return new th({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:a,message:n.toString(r)}]})}_addCheck(e){return new th({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:n.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:n.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:n.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:n.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:n.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:n.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:n.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:n.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:n.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&s.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let a of this._def.checks){if("finite"===a.kind||"int"===a.kind||"multipleOf"===a.kind)return!0;"min"===a.kind?(null===t||a.value>t)&&(t=a.value):"max"===a.kind&&(null===e||a.value<e)&&(e=a.value)}return Number.isFinite(t)&&Number.isFinite(e)}}th.create=e=>new th({checks:[],typeName:o.ZodNumber,coerce:e?.coerce||!1,...e4(e)});class tp extends e9{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==eM.bigint)return this._getInvalidInput(e);let a=new eH;for(let r of this._def.checks)"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(eB(t=this._getOrReturnCtx(e,t),{code:ez.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(eB(t=this._getOrReturnCtx(e,t),{code:ez.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(eB(t=this._getOrReturnCtx(e,t),{code:ez.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):s.assertNever(r);return{status:a.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return eB(t,{code:ez.invalid_type,expected:eM.bigint,received:t.parsedType}),eV}gte(e,t){return this.setLimit("min",e,!0,n.toString(t))}gt(e,t){return this.setLimit("min",e,!1,n.toString(t))}lte(e,t){return this.setLimit("max",e,!0,n.toString(t))}lt(e,t){return this.setLimit("max",e,!1,n.toString(t))}setLimit(e,t,a,r){return new tp({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:a,message:n.toString(r)}]})}_addCheck(e){return new tp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:n.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:n.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:n.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:n.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:n.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}tp.create=e=>new tp({checks:[],typeName:o.ZodBigInt,coerce:e?.coerce??!1,...e4(e)});class tm extends e9{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==eM.boolean){let t=this._getOrReturnCtx(e);return eB(t,{code:ez.invalid_type,expected:eM.boolean,received:t.parsedType}),eV}return eG(e.data)}}tm.create=e=>new tm({typeName:o.ZodBoolean,coerce:e?.coerce||!1,...e4(e)});class tf extends e9{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==eM.date){let t=this._getOrReturnCtx(e);return eB(t,{code:ez.invalid_type,expected:eM.date,received:t.parsedType}),eV}if(Number.isNaN(e.data.getTime()))return eB(this._getOrReturnCtx(e),{code:ez.invalid_date}),eV;let a=new eH;for(let r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(eB(t=this._getOrReturnCtx(e,t),{code:ez.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),a.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(eB(t=this._getOrReturnCtx(e,t),{code:ez.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),a.dirty()):s.assertNever(r);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new tf({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:n.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:n.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}tf.create=e=>new tf({checks:[],coerce:e?.coerce||!1,typeName:o.ZodDate,...e4(e)});class tg extends e9{_parse(e){if(this._getType(e)!==eM.symbol){let t=this._getOrReturnCtx(e);return eB(t,{code:ez.invalid_type,expected:eM.symbol,received:t.parsedType}),eV}return eG(e.data)}}tg.create=e=>new tg({typeName:o.ZodSymbol,...e4(e)});class ty extends e9{_parse(e){if(this._getType(e)!==eM.undefined){let t=this._getOrReturnCtx(e);return eB(t,{code:ez.invalid_type,expected:eM.undefined,received:t.parsedType}),eV}return eG(e.data)}}ty.create=e=>new ty({typeName:o.ZodUndefined,...e4(e)});class tv extends e9{_parse(e){if(this._getType(e)!==eM.null){let t=this._getOrReturnCtx(e);return eB(t,{code:ez.invalid_type,expected:eM.null,received:t.parsedType}),eV}return eG(e.data)}}tv.create=e=>new tv({typeName:o.ZodNull,...e4(e)});class tw extends e9{constructor(){super(...arguments),this._any=!0}_parse(e){return eG(e.data)}}tw.create=e=>new tw({typeName:o.ZodAny,...e4(e)});class t_ extends e9{constructor(){super(...arguments),this._unknown=!0}_parse(e){return eG(e.data)}}t_.create=e=>new t_({typeName:o.ZodUnknown,...e4(e)});class tb extends e9{_parse(e){let t=this._getOrReturnCtx(e);return eB(t,{code:ez.invalid_type,expected:eM.never,received:t.parsedType}),eV}}tb.create=e=>new tb({typeName:o.ZodNever,...e4(e)});class tk extends e9{_parse(e){if(this._getType(e)!==eM.undefined){let t=this._getOrReturnCtx(e);return eB(t,{code:ez.invalid_type,expected:eM.void,received:t.parsedType}),eV}return eG(e.data)}}tk.create=e=>new tk({typeName:o.ZodVoid,...e4(e)});class tE extends e9{_parse(e){let{ctx:t,status:a}=this._processInputParams(e),r=this._def;if(t.parsedType!==eM.array)return eB(t,{code:ez.invalid_type,expected:eM.array,received:t.parsedType}),eV;if(null!==r.exactLength){let e=t.data.length>r.exactLength.value,s=t.data.length<r.exactLength.value;(e||s)&&(eB(t,{code:e?ez.too_big:ez.too_small,minimum:s?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),a.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(eB(t,{code:ez.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),a.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(eB(t,{code:ez.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),a.dirty()),t.common.async)return Promise.all([...t.data].map((e,a)=>r.type._parseAsync(new e0(t,e,t.path,a)))).then(e=>eH.mergeArray(a,e));let s=[...t.data].map((e,a)=>r.type._parseSync(new e0(t,e,t.path,a)));return eH.mergeArray(a,s)}get element(){return this._def.type}min(e,t){return new tE({...this._def,minLength:{value:e,message:n.toString(t)}})}max(e,t){return new tE({...this._def,maxLength:{value:e,message:n.toString(t)}})}length(e,t){return new tE({...this._def,exactLength:{value:e,message:n.toString(t)}})}nonempty(e){return this.min(1,e)}}tE.create=(e,t)=>new tE({type:e,minLength:null,maxLength:null,exactLength:null,typeName:o.ZodArray,...e4(t)});class tx extends e9{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=s.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==eM.object){let t=this._getOrReturnCtx(e);return eB(t,{code:ez.invalid_type,expected:eM.object,received:t.parsedType}),eV}let{status:t,ctx:a}=this._processInputParams(e),{shape:r,keys:s}=this._getCached(),i=[];if(!(this._def.catchall instanceof tb&&"strip"===this._def.unknownKeys))for(let e in a.data)s.includes(e)||i.push(e);let n=[];for(let e of s){let t=r[e],s=a.data[e];n.push({key:{status:"valid",value:e},value:t._parse(new e0(a,s,a.path,e)),alwaysSet:e in a.data})}if(this._def.catchall instanceof tb){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of i)n.push({key:{status:"valid",value:e},value:{status:"valid",value:a.data[e]}});else if("strict"===e)i.length>0&&(eB(a,{code:ez.unrecognized_keys,keys:i}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of i){let r=a.data[t];n.push({key:{status:"valid",value:t},value:e._parse(new e0(a,r,a.path,t)),alwaysSet:t in a.data})}}return a.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of n){let a=await t.key,r=await t.value;e.push({key:a,value:r,alwaysSet:t.alwaysSet})}return e}).then(e=>eH.mergeObjectSync(t,e)):eH.mergeObjectSync(t,n)}get shape(){return this._def.shape()}strict(e){return n.errToObj,new tx({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,a)=>{let r=this._def.errorMap?.(t,a).message??a.defaultError;return"unrecognized_keys"===t.code?{message:n.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new tx({...this._def,unknownKeys:"strip"})}passthrough(){return new tx({...this._def,unknownKeys:"passthrough"})}extend(e){return new tx({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new tx({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:o.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new tx({...this._def,catchall:e})}pick(e){let t={};for(let a of s.objectKeys(e))e[a]&&this.shape[a]&&(t[a]=this.shape[a]);return new tx({...this._def,shape:()=>t})}omit(e){let t={};for(let a of s.objectKeys(this.shape))e[a]||(t[a]=this.shape[a]);return new tx({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof tx){let a={};for(let r in t.shape){let s=t.shape[r];a[r]=tz.create(e(s))}return new tx({...t._def,shape:()=>a})}return t instanceof tE?new tE({...t._def,type:e(t.element)}):t instanceof tz?tz.create(e(t.unwrap())):t instanceof tL?tL.create(e(t.unwrap())):t instanceof tO?tO.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};for(let a of s.objectKeys(this.shape)){let r=this.shape[a];e&&!e[a]?t[a]=r:t[a]=r.optional()}return new tx({...this._def,shape:()=>t})}required(e){let t={};for(let a of s.objectKeys(this.shape))if(e&&!e[a])t[a]=this.shape[a];else{let e=this.shape[a];for(;e instanceof tz;)e=e._def.innerType;t[a]=e}return new tx({...this._def,shape:()=>t})}keyof(){return tN(s.objectKeys(this.shape))}}tx.create=(e,t)=>new tx({shape:()=>e,unknownKeys:"strip",catchall:tb.create(),typeName:o.ZodObject,...e4(t)}),tx.strictCreate=(e,t)=>new tx({shape:()=>e,unknownKeys:"strict",catchall:tb.create(),typeName:o.ZodObject,...e4(t)}),tx.lazycreate=(e,t)=>new tx({shape:e,unknownKeys:"strip",catchall:tb.create(),typeName:o.ZodObject,...e4(t)});class tI extends e9{_parse(e){let{ctx:t}=this._processInputParams(e),a=this._def.options;if(t.common.async)return Promise.all(a.map(async e=>{let a={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let a of e)if("dirty"===a.result.status)return t.common.issues.push(...a.ctx.common.issues),a.result;let a=e.map(e=>new eL(e.ctx.common.issues));return eB(t,{code:ez.invalid_union,unionErrors:a}),eV});{let e;let r=[];for(let s of a){let a={...t,common:{...t.common,issues:[]},parent:null},i=s._parseSync({data:t.data,path:t.path,parent:a});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:a}),a.common.issues.length&&r.push(a.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let s=r.map(e=>new eL(e));return eB(t,{code:ez.invalid_union,unionErrors:s}),eV}}get options(){return this._def.options}}tI.create=(e,t)=>new tI({options:e,typeName:o.ZodUnion,...e4(t)});let tA=e=>{if(e instanceof tC)return tA(e.schema);if(e instanceof tF)return tA(e.innerType());if(e instanceof tR)return[e.value];if(e instanceof tP)return e.options;if(e instanceof tZ)return s.objectValues(e.enum);if(e instanceof tU)return tA(e._def.innerType);if(e instanceof ty)return[void 0];else if(e instanceof tv)return[null];else if(e instanceof tz)return[void 0,...tA(e.unwrap())];else if(e instanceof tL)return[null,...tA(e.unwrap())];else if(e instanceof tH)return tA(e.unwrap());else if(e instanceof tK)return tA(e.unwrap());else if(e instanceof tW)return tA(e._def.innerType);else return[]};class tS extends e9{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==eM.object)return eB(t,{code:ez.invalid_type,expected:eM.object,received:t.parsedType}),eV;let a=this.discriminator,r=t.data[a],s=this.optionsMap.get(r);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(eB(t,{code:ez.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),eV)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,a){let r=new Map;for(let a of t){let t=tA(a.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let s of t){if(r.has(s))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);r.set(s,a)}}return new tS({typeName:o.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...e4(a)})}}class tj extends e9{_parse(e){let{status:t,ctx:a}=this._processInputParams(e),r=(e,r)=>{if(eJ(e)||eJ(r))return eV;let i=function e(t,a){let r=eF(t),i=eF(a);if(t===a)return{valid:!0,data:t};if(r===eM.object&&i===eM.object){let r=s.objectKeys(a),i=s.objectKeys(t).filter(e=>-1!==r.indexOf(e)),n={...t,...a};for(let r of i){let s=e(t[r],a[r]);if(!s.valid)return{valid:!1};n[r]=s.data}return{valid:!0,data:n}}if(r===eM.array&&i===eM.array){if(t.length!==a.length)return{valid:!1};let r=[];for(let s=0;s<t.length;s++){let i=e(t[s],a[s]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===eM.date&&i===eM.date&&+t==+a?{valid:!0,data:t}:{valid:!1}}(e.value,r.value);return i.valid?((eY(e)||eY(r))&&t.dirty(),{status:t.value,value:i.data}):(eB(a,{code:ez.invalid_intersection_types}),eV)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}tj.create=(e,t,a)=>new tj({left:e,right:t,typeName:o.ZodIntersection,...e4(a)});class tO extends e9{_parse(e){let{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==eM.array)return eB(a,{code:ez.invalid_type,expected:eM.array,received:a.parsedType}),eV;if(a.data.length<this._def.items.length)return eB(a,{code:ez.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),eV;!this._def.rest&&a.data.length>this._def.items.length&&(eB(a,{code:ez.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let r=[...a.data].map((e,t)=>{let r=this._def.items[t]||this._def.rest;return r?r._parse(new e0(a,e,a.path,t)):null}).filter(e=>!!e);return a.common.async?Promise.all(r).then(e=>eH.mergeArray(t,e)):eH.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new tO({...this._def,rest:e})}}tO.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new tO({items:e,typeName:o.ZodTuple,rest:null,...e4(t)})};class tT extends e9{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==eM.object)return eB(a,{code:ez.invalid_type,expected:eM.object,received:a.parsedType}),eV;let r=[],s=this._def.keyType,i=this._def.valueType;for(let e in a.data)r.push({key:s._parse(new e0(a,e,a.path,e)),value:i._parse(new e0(a,a.data[e],a.path,e)),alwaysSet:e in a.data});return a.common.async?eH.mergeObjectAsync(t,r):eH.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,a){return new tT(t instanceof e9?{keyType:e,valueType:t,typeName:o.ZodRecord,...e4(a)}:{keyType:tc.create(),valueType:e,typeName:o.ZodRecord,...e4(t)})}}class tq extends e9{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==eM.map)return eB(a,{code:ez.invalid_type,expected:eM.map,received:a.parsedType}),eV;let r=this._def.keyType,s=this._def.valueType,i=[...a.data.entries()].map(([e,t],i)=>({key:r._parse(new e0(a,e,a.path,[i,"key"])),value:s._parse(new e0(a,t,a.path,[i,"value"]))}));if(a.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let a of i){let r=await a.key,s=await a.value;if("aborted"===r.status||"aborted"===s.status)return eV;("dirty"===r.status||"dirty"===s.status)&&t.dirty(),e.set(r.value,s.value)}return{status:t.value,value:e}})}{let e=new Map;for(let a of i){let r=a.key,s=a.value;if("aborted"===r.status||"aborted"===s.status)return eV;("dirty"===r.status||"dirty"===s.status)&&t.dirty(),e.set(r.value,s.value)}return{status:t.value,value:e}}}}tq.create=(e,t,a)=>new tq({valueType:t,keyType:e,typeName:o.ZodMap,...e4(a)});class t$ extends e9{_parse(e){let{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==eM.set)return eB(a,{code:ez.invalid_type,expected:eM.set,received:a.parsedType}),eV;let r=this._def;null!==r.minSize&&a.data.size<r.minSize.value&&(eB(a,{code:ez.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&a.data.size>r.maxSize.value&&(eB(a,{code:ez.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let s=this._def.valueType;function i(e){let a=new Set;for(let r of e){if("aborted"===r.status)return eV;"dirty"===r.status&&t.dirty(),a.add(r.value)}return{status:t.value,value:a}}let n=[...a.data.values()].map((e,t)=>s._parse(new e0(a,e,a.path,t)));return a.common.async?Promise.all(n).then(e=>i(e)):i(n)}min(e,t){return new t$({...this._def,minSize:{value:e,message:n.toString(t)}})}max(e,t){return new t$({...this._def,maxSize:{value:e,message:n.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}t$.create=(e,t)=>new t$({valueType:e,minSize:null,maxSize:null,typeName:o.ZodSet,...e4(t)});class tD extends e9{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==eM.function)return eB(t,{code:ez.invalid_type,expected:eM.function,received:t.parsedType}),eV;function a(e,a){return eW({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,eU,eU].filter(e=>!!e),issueData:{code:ez.invalid_arguments,argumentsError:a}})}function r(e,a){return eW({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,eU,eU].filter(e=>!!e),issueData:{code:ez.invalid_return_type,returnTypeError:a}})}let s={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof tM){let e=this;return eG(async function(...t){let n=new eL([]),o=await e._def.args.parseAsync(t,s).catch(e=>{throw n.addIssue(a(t,e)),n}),d=await Reflect.apply(i,this,o);return await e._def.returns._def.type.parseAsync(d,s).catch(e=>{throw n.addIssue(r(d,e)),n})})}{let e=this;return eG(function(...t){let n=e._def.args.safeParse(t,s);if(!n.success)throw new eL([a(t,n.error)]);let o=Reflect.apply(i,this,n.data),d=e._def.returns.safeParse(o,s);if(!d.success)throw new eL([r(o,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new tD({...this._def,args:tO.create(e).rest(t_.create())})}returns(e){return new tD({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,a){return new tD({args:e||tO.create([]).rest(t_.create()),returns:t||t_.create(),typeName:o.ZodFunction,...e4(a)})}}class tC extends e9{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}tC.create=(e,t)=>new tC({getter:e,typeName:o.ZodLazy,...e4(t)});class tR extends e9{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return eB(t,{received:t.data,code:ez.invalid_literal,expected:this._def.value}),eV}return{status:"valid",value:e.data}}get value(){return this._def.value}}function tN(e,t){return new tP({values:e,typeName:o.ZodEnum,...e4(t)})}tR.create=(e,t)=>new tR({value:e,typeName:o.ZodLiteral,...e4(t)});class tP extends e9{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),a=this._def.values;return eB(t,{expected:s.joinValues(a),received:t.parsedType,code:ez.invalid_type}),eV}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),a=this._def.values;return eB(t,{received:t.data,code:ez.invalid_enum_value,options:a}),eV}return eG(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return tP.create(e,{...this._def,...t})}exclude(e,t=this._def){return tP.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}tP.create=tN;class tZ extends e9{_parse(e){let t=s.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==eM.string&&a.parsedType!==eM.number){let e=s.objectValues(t);return eB(a,{expected:s.joinValues(e),received:a.parsedType,code:ez.invalid_type}),eV}if(this._cache||(this._cache=new Set(s.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=s.objectValues(t);return eB(a,{received:a.data,code:ez.invalid_enum_value,options:e}),eV}return eG(e.data)}get enum(){return this._def.values}}tZ.create=(e,t)=>new tZ({values:e,typeName:o.ZodNativeEnum,...e4(t)});class tM extends e9{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==eM.promise&&!1===t.common.async?(eB(t,{code:ez.invalid_type,expected:eM.promise,received:t.parsedType}),eV):eG((t.parsedType===eM.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}tM.create=(e,t)=>new tM({type:e,typeName:o.ZodPromise,...e4(t)});class tF extends e9{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===o.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:a}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:e=>{eB(a,e),e.fatal?t.abort():t.dirty()},get path(){return a.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===r.type){let e=r.transform(a.data,i);if(a.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return eV;let r=await this._def.schema._parseAsync({data:e,path:a.path,parent:a});return"aborted"===r.status?eV:"dirty"===r.status||"dirty"===t.value?eK(r.value):r});{if("aborted"===t.value)return eV;let r=this._def.schema._parseSync({data:e,path:a.path,parent:a});return"aborted"===r.status?eV:"dirty"===r.status||"dirty"===t.value?eK(r.value):r}}if("refinement"===r.type){let e=e=>{let t=r.refinement(e,i);if(a.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==a.common.async)return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(a=>"aborted"===a.status?eV:("dirty"===a.status&&t.dirty(),e(a.value).then(()=>({status:t.value,value:a.value}))));{let r=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return"aborted"===r.status?eV:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}}if("transform"===r.type){if(!1!==a.common.async)return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(e=>eX(e)?Promise.resolve(r.transform(e.value,i)).then(e=>({status:t.value,value:e})):eV);{let e=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!eX(e))return eV;let s=r.transform(e.value,i);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}}s.assertNever(r)}}tF.create=(e,t,a)=>new tF({schema:e,typeName:o.ZodEffects,effect:t,...e4(a)}),tF.createWithPreprocess=(e,t,a)=>new tF({schema:t,effect:{type:"preprocess",transform:e},typeName:o.ZodEffects,...e4(a)});class tz extends e9{_parse(e){return this._getType(e)===eM.undefined?eG(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tz.create=(e,t)=>new tz({innerType:e,typeName:o.ZodOptional,...e4(t)});class tL extends e9{_parse(e){return this._getType(e)===eM.null?eG(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tL.create=(e,t)=>new tL({innerType:e,typeName:o.ZodNullable,...e4(t)});class tU extends e9{_parse(e){let{ctx:t}=this._processInputParams(e),a=t.data;return t.parsedType===eM.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}tU.create=(e,t)=>new tU({innerType:e,typeName:o.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...e4(t)});class tW extends e9{_parse(e){let{ctx:t}=this._processInputParams(e),a={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return eQ(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new eL(a.common.issues)},input:a.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new eL(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}tW.create=(e,t)=>new tW({innerType:e,typeName:o.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...e4(t)});class tB extends e9{_parse(e){if(this._getType(e)!==eM.nan){let t=this._getOrReturnCtx(e);return eB(t,{code:ez.invalid_type,expected:eM.nan,received:t.parsedType}),eV}return{status:"valid",value:e.data}}}tB.create=e=>new tB({typeName:o.ZodNaN,...e4(e)}),Symbol("zod_brand");class tH extends e9{_parse(e){let{ctx:t}=this._processInputParams(e),a=t.data;return this._def.type._parse({data:a,path:t.path,parent:t})}unwrap(){return this._def.type}}class tV extends e9{_parse(e){let{status:t,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return"aborted"===e.status?eV:"dirty"===e.status?(t.dirty(),eK(e.value)):this._def.out._parseAsync({data:e.value,path:a.path,parent:a})})();{let e=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return"aborted"===e.status?eV:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:a.path,parent:a})}}static create(e,t){return new tV({in:e,out:t,typeName:o.ZodPipeline})}}class tK extends e9{_parse(e){let t=this._def.innerType._parse(e),a=e=>(eX(e)&&(e.value=Object.freeze(e.value)),e);return eQ(t)?t.then(e=>a(e)):a(t)}unwrap(){return this._def.innerType}}function tG(e,t){let a="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof a?{message:a}:a}tK.create=(e,t)=>new tK({innerType:e,typeName:o.ZodReadonly,...e4(t)}),tx.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(o||(o={}));let tJ=(e,t={message:`Input not instance of ${e.name}`})=>(function(e,t={},a){return e?tw.create().superRefine((a,r)=>{let s=e(a);if(s instanceof Promise)return s.then(e=>{if(!e){let e=tG(t,a),s=e.fatal??void 0??!0;r.addIssue({code:"custom",...e,fatal:s})}});if(!s){let e=tG(t,a),s=e.fatal??void 0??!0;r.addIssue({code:"custom",...e,fatal:s})}}):tw.create()})(t=>t instanceof e,t),tY=tc.create,tX=th.create;tB.create,tp.create,tm.create,tf.create,tg.create,ty.create,tv.create,tw.create,t_.create,tb.create,tk.create;let tQ=tE.create,t0=tx.create;tx.strictCreate;let t1=tI.create;tS.create,tj.create,tO.create,tT.create,tq.create,t$.create,tD.create,tC.create,tR.create,tP.create;let t4=tZ.create;tM.create,tF.create,tz.create,tL.create,tF.createWithPreprocess,tV.create;var t9=(e,t,a)=>eZ(e,async(r,s)=>{let i=r;if("header"===e&&t instanceof tx){let e=Object.fromEntries(Object.keys(t.shape).map(e=>[e.toLowerCase(),e]));i=Object.fromEntries(Object.entries(r).map(([t,a])=>[e[t]||t,a]))}let n=await t.safeParseAsync(i);if(a){let t=await a({data:i,...n,target:e},s);if(t){if(t instanceof Response)return t;if("response"in t)return t.response}}return n.success?n.data:s.json(n,400)}),t2=a(57004),t5=a(41073);let t6=t0({email:tY().trim().email({message:"Invalid email."}),password:tY({required_error:"Password is required."})}),t3=t0({name:tY().trim().min(1,"Full name is required."),email:tY().trim().min(1,"Email is required.").email({message:"Invalid email."}),password:tY().min(8,"Password must be atleast 8 characters.").max(256,"Password cannot exceed 256 characters.")});var t8=a(24074);let t7=async(e,t)=>{let a=new t2.KU().setEndpoint("https://fra.cloud.appwrite.io/v1").setProject("68093d3e003a1ba38e6c"),r=eT(e,t5.V);if(!r)return e.json({error:"Unauthorized."},401);a.setSession(r);let s=new t2.mR(a),i=new t2.Lg(a),n=new t2.Ke(a),o=await s.get();e.set("account",s),e.set("databases",i),e.set("storage",n),e.set("user",o),await t()},ae=new ek().get("/",t9("query",t0({userId:tY().trim().min(1),secret:tY().trim().min(1)})),async e=>{let{userId:t,secret:a}=e.req.valid("query"),{account:r}=await (0,t8.i)(),s=await r.createSession(t,a);return eq(e,t5.V,s.secret,{path:"/",httpOnly:!0,secure:!0,sameSite:"strict",maxAge:2592e3}),e.redirect("http://localhost:3000")}).get("/current",t7,e=>{let t=e.get("user");return e.json({data:t})}).post("/login",t9("json",t6),async e=>{let{email:t,password:a}=e.req.valid("json"),{account:r}=await (0,t8.i)(),s=await r.createEmailPasswordSession(t,a);return eq(e,t5.V,s.secret,{path:"/",httpOnly:!0,secure:!0,sameSite:"strict",maxAge:2592e3}),e.json({success:!0})}).post("/register",t9("json",t3),async e=>{let{name:t,email:a,password:r}=e.req.valid("json"),{account:s}=await (0,t8.i)();await s.create(t2.ID.unique(),a,r,t);let i=await s.createEmailPasswordSession(a,r);return eq(e,t5.V,i.secret,{path:"/",httpOnly:!0,secure:!0,sameSite:"strict",maxAge:2592e3}),e.json({success:!0})}).post("/logout",t7,async e=>{let t=e.get("account");return e$(e,t5.V),await t.deleteSession("current"),e.json({success:!0})});function at(e,t,a,r){return new(a||(a=Promise))(function(s,i){function n(e){try{d(r.next(e))}catch(e){i(e)}}function o(e){try{d(r.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?s(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}d((r=r.apply(e,t||[])).next())})}class aa{constructor(e,t,a){this.method=e,this.attribute=t,void 0!==a&&(Array.isArray(a)?this.values=a:this.values=[a])}toString(){return JSON.stringify({method:this.method,attribute:this.attribute,values:this.values})}}aa.equal=(e,t)=>new aa("equal",e,t).toString(),aa.notEqual=(e,t)=>new aa("notEqual",e,t).toString(),aa.lessThan=(e,t)=>new aa("lessThan",e,t).toString(),aa.lessThanEqual=(e,t)=>new aa("lessThanEqual",e,t).toString(),aa.greaterThan=(e,t)=>new aa("greaterThan",e,t).toString(),aa.greaterThanEqual=(e,t)=>new aa("greaterThanEqual",e,t).toString(),aa.isNull=e=>new aa("isNull",e).toString(),aa.isNotNull=e=>new aa("isNotNull",e).toString(),aa.between=(e,t,a)=>new aa("between",e,[t,a]).toString(),aa.startsWith=(e,t)=>new aa("startsWith",e,t).toString(),aa.endsWith=(e,t)=>new aa("endsWith",e,t).toString(),aa.select=e=>new aa("select",void 0,e).toString(),aa.search=(e,t)=>new aa("search",e,t).toString(),aa.orderDesc=e=>new aa("orderDesc",e).toString(),aa.orderAsc=e=>new aa("orderAsc",e).toString(),aa.cursorAfter=e=>new aa("cursorAfter",void 0,e).toString(),aa.cursorBefore=e=>new aa("cursorBefore",void 0,e).toString(),aa.limit=e=>new aa("limit",void 0,e).toString(),aa.offset=e=>new aa("offset",void 0,e).toString(),aa.contains=(e,t)=>new aa("contains",e,t).toString(),aa.or=e=>new aa("or",void 0,e.map(e=>JSON.parse(e))).toString(),aa.and=e=>new aa("and",void 0,e.map(e=>JSON.parse(e))).toString();class ar extends Error{constructor(e,t=0,a="",r=""){super(e),this.name="AppwriteException",this.message=e,this.code=t,this.type=a,this.response=r}}class as{constructor(){this.config={endpoint:"https://cloud.appwrite.io/v1",endpointRealtime:"",project:"",jwt:"",locale:"",session:""},this.headers={"x-sdk-name":"Web","x-sdk-platform":"client","x-sdk-language":"web","x-sdk-version":"17.0.2","X-Appwrite-Response-Format":"1.6.0"},this.realtime={socket:void 0,timeout:void 0,heartbeat:void 0,url:"",channels:new Set,subscriptions:new Map,subscriptionsCounter:0,reconnect:!0,reconnectAttempts:0,lastMessage:void 0,connect:()=>{clearTimeout(this.realtime.timeout),this.realtime.timeout=null==window?void 0:window.setTimeout(()=>{this.realtime.createSocket()},50)},getTimeout:()=>{switch(!0){case this.realtime.reconnectAttempts<5:return 1e3;case this.realtime.reconnectAttempts<15:return 5e3;case this.realtime.reconnectAttempts<100:return 1e4;default:return 6e4}},createHeartbeat:()=>{this.realtime.heartbeat&&clearTimeout(this.realtime.heartbeat),this.realtime.heartbeat=null==window?void 0:window.setInterval(()=>{var e;null===(e=this.realtime.socket)||void 0===e||e.send(JSON.stringify({type:"ping"}))},2e4)},createSocket:()=>{var e,t,a;if(this.realtime.channels.size<1){this.realtime.reconnect=!1,null===(e=this.realtime.socket)||void 0===e||e.close();return}let r=new URLSearchParams;r.set("project",this.config.project),this.realtime.channels.forEach(e=>{r.append("channels[]",e)});let s=this.config.endpointRealtime+"/realtime?"+r.toString();(s!==this.realtime.url||!this.realtime.socket||(null===(t=this.realtime.socket)||void 0===t?void 0:t.readyState)>WebSocket.OPEN)&&(this.realtime.socket&&(null===(a=this.realtime.socket)||void 0===a?void 0:a.readyState)<WebSocket.CLOSING&&(this.realtime.reconnect=!1,this.realtime.socket.close()),this.realtime.url=s,this.realtime.socket=new WebSocket(s),this.realtime.socket.addEventListener("message",this.realtime.onMessage),this.realtime.socket.addEventListener("open",e=>{this.realtime.reconnectAttempts=0,this.realtime.createHeartbeat()}),this.realtime.socket.addEventListener("close",e=>{var t,a,r;if(!this.realtime.reconnect||(null===(a=null===(t=this.realtime)||void 0===t?void 0:t.lastMessage)||void 0===a?void 0:a.type)==="error"&&1008===(null===(r=this.realtime)||void 0===r?void 0:r.lastMessage.data).code){this.realtime.reconnect=!0;return}let s=this.realtime.getTimeout();console.error(`Realtime got disconnected. Reconnect will be attempted in ${s/1e3} seconds.`,e.reason),setTimeout(()=>{this.realtime.reconnectAttempts++,this.realtime.createSocket()},s)}))},onMessage:e=>{var t,a;try{let r=JSON.parse(e.data);switch(this.realtime.lastMessage=r,r.type){case"connected":let s=JSON.parse(null!==(t=window.localStorage.getItem("cookieFallback"))&&void 0!==t?t:"{}"),i=null==s?void 0:s[`a_session_${this.config.project}`],n=r.data;i&&!n.user&&(null===(a=this.realtime.socket)||void 0===a||a.send(JSON.stringify({type:"authentication",data:{session:i}})));break;case"event":let o=r.data;if(null==o?void 0:o.channels){if(!o.channels.some(e=>this.realtime.channels.has(e)))return;this.realtime.subscriptions.forEach(e=>{o.channels.some(t=>e.channels.includes(t))&&setTimeout(()=>e.callback(o))})}break;case"pong":break;case"error":throw r.data}}catch(e){console.error(e)}},cleanUp:e=>{this.realtime.channels.forEach(t=>{e.includes(t)&&!Array.from(this.realtime.subscriptions).some(([e,a])=>a.channels.includes(t))&&this.realtime.channels.delete(t)})}}}setEndpoint(e){if(!e.startsWith("http://")&&!e.startsWith("https://"))throw new ar("Invalid endpoint URL: "+e);return this.config.endpoint=e,this.config.endpointRealtime=e.replace("https://","wss://").replace("http://","ws://"),this}setEndpointRealtime(e){if(!e.startsWith("ws://")&&!e.startsWith("wss://"))throw new ar("Invalid realtime endpoint URL: "+e);return this.config.endpointRealtime=e,this}setProject(e){return this.headers["X-Appwrite-Project"]=e,this.config.project=e,this}setJWT(e){return this.headers["X-Appwrite-JWT"]=e,this.config.jwt=e,this}setLocale(e){return this.headers["X-Appwrite-Locale"]=e,this.config.locale=e,this}setSession(e){return this.headers["X-Appwrite-Session"]=e,this.config.session=e,this}subscribe(e,t){let a="string"==typeof e?[e]:e;a.forEach(e=>this.realtime.channels.add(e));let r=this.realtime.subscriptionsCounter++;return this.realtime.subscriptions.set(r,{channels:a,callback:t}),this.realtime.connect(),()=>{this.realtime.subscriptions.delete(r),this.realtime.cleanUp(a),this.realtime.connect()}}prepareRequest(e,t,a={},r={}){if(e=e.toUpperCase(),a=Object.assign({},this.headers,a),"undefined"!=typeof window&&window.localStorage){let e=window.localStorage.getItem("cookieFallback");e&&(a["X-Fallback-Cookies"]=e)}let s={method:e,headers:a,credentials:"include"};if("GET"===e)for(let[e,a]of Object.entries(as.flatten(r)))t.searchParams.append(e,a);else switch(a["content-type"]){case"application/json":s.body=JSON.stringify(r);break;case"multipart/form-data":let i=new FormData;for(let[e,t]of Object.entries(r))if(t instanceof File)i.append(e,t,t.name);else if(Array.isArray(t))for(let a of t)i.append(`${e}[]`,a);else i.append(e,t);s.body=i,delete a["content-type"]}return{uri:t.toString(),options:s}}chunkedUpload(e,t,a={},r={},s){return at(this,void 0,void 0,function*(){let i=Object.values(r).find(e=>e instanceof File);if(!i)throw Error("File not found in payload");if(i.size<=as.CHUNK_SIZE)return yield this.call(e,t,a,r);let n=0,o=null;for(;n<i.size;){let d=n+as.CHUNK_SIZE;d>=i.size&&(d=i.size),a["content-range"]=`bytes ${n}-${d-1}/${i.size}`;let l=i.slice(n,d),u=Object.assign(Object.assign({},r),{file:new File([l],i.name)});o=yield this.call(e,t,a,u),s&&"function"==typeof s&&s({$id:o.$id,progress:Math.round(d/i.size*100),sizeUploaded:d,chunksTotal:Math.ceil(i.size/as.CHUNK_SIZE),chunksUploaded:Math.ceil(d/as.CHUNK_SIZE)}),o&&o.$id&&(a["x-appwrite-id"]=o.$id),n=d}return o})}ping(){return at(this,void 0,void 0,function*(){return this.call("GET",new URL(this.config.endpoint+"/ping"))})}call(e,t,a={},r={},s="json"){var i,n;return at(this,void 0,void 0,function*(){let{uri:o,options:d}=this.prepareRequest(e,t,a,r),l=null,u=yield fetch(o,d),c=u.headers.get("x-appwrite-warning");if(c&&c.split(";").forEach(e=>console.warn("Warning: "+e)),l=(null===(i=u.headers.get("content-type"))||void 0===i?void 0:i.includes("application/json"))?yield u.json():"arrayBuffer"===s?yield u.arrayBuffer():{message:yield u.text()},400<=u.status){let e="";throw e=(null===(n=u.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"))||"arrayBuffer"===s?JSON.stringify(l):null==l?void 0:l.message,new ar(null==l?void 0:l.message,u.status,null==l?void 0:l.type,e)}let h=u.headers.get("X-Fallback-Cookies");return"undefined"!=typeof window&&window.localStorage&&h&&(window.console.warn("Appwrite is using localStorage for session management. Increase your security by adding a custom domain as your API endpoint."),window.localStorage.setItem("cookieFallback",h)),l})}static flatten(e,t=""){let a={};for(let[r,s]of Object.entries(e)){let e=t?t+"["+r+"]":r;Array.isArray(s)?a=Object.assign(Object.assign({},a),as.flatten(s,e)):a[e]=s}return a}}as.CHUNK_SIZE=5242880;class ai{constructor(e){this.client=e}static flatten(e,t=""){let a={};for(let[r,s]of Object.entries(e)){let e=t?t+"["+r+"]":r;Array.isArray(s)?a=Object.assign(Object.assign({},a),ai.flatten(s,e)):a[e]=s}return a}}ai.CHUNK_SIZE=5242880;class an{constructor(e){this.client=e}listDocuments(e,t,a){if(void 0===e)throw new ar('Missing required parameter: "databaseId"');if(void 0===t)throw new ar('Missing required parameter: "collectionId"');let r="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",e).replace("{collectionId}",t),s={};void 0!==a&&(s.queries=a);let i=new URL(this.client.config.endpoint+r);return this.client.call("get",i,{},s)}createDocument(e,t,a,r,s){if(void 0===e)throw new ar('Missing required parameter: "databaseId"');if(void 0===t)throw new ar('Missing required parameter: "collectionId"');if(void 0===a)throw new ar('Missing required parameter: "documentId"');if(void 0===r)throw new ar('Missing required parameter: "data"');let i="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",e).replace("{collectionId}",t),n={};void 0!==a&&(n.documentId=a),void 0!==r&&(n.data=r),void 0!==s&&(n.permissions=s);let o=new URL(this.client.config.endpoint+i);return this.client.call("post",o,{"content-type":"application/json"},n)}getDocument(e,t,a,r){if(void 0===e)throw new ar('Missing required parameter: "databaseId"');if(void 0===t)throw new ar('Missing required parameter: "collectionId"');if(void 0===a)throw new ar('Missing required parameter: "documentId"');let s="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",e).replace("{collectionId}",t).replace("{documentId}",a),i={};void 0!==r&&(i.queries=r);let n=new URL(this.client.config.endpoint+s);return this.client.call("get",n,{},i)}updateDocument(e,t,a,r,s){if(void 0===e)throw new ar('Missing required parameter: "databaseId"');if(void 0===t)throw new ar('Missing required parameter: "collectionId"');if(void 0===a)throw new ar('Missing required parameter: "documentId"');let i="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",e).replace("{collectionId}",t).replace("{documentId}",a),n={};void 0!==r&&(n.data=r),void 0!==s&&(n.permissions=s);let o=new URL(this.client.config.endpoint+i);return this.client.call("patch",o,{"content-type":"application/json"},n)}deleteDocument(e,t,a){if(void 0===e)throw new ar('Missing required parameter: "databaseId"');if(void 0===t)throw new ar('Missing required parameter: "collectionId"');if(void 0===a)throw new ar('Missing required parameter: "documentId"');let r="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",e).replace("{collectionId}",t).replace("{documentId}",a),s=new URL(this.client.config.endpoint+r);return this.client.call("delete",s,{"content-type":"application/json"},{})}}class ao{}ao.read=e=>`read("${e}")`,ao.write=e=>`write("${e}")`,ao.create=e=>`create("${e}")`,ao.update=e=>`update("${e}")`,ao.delete=e=>`delete("${e}")`;class ad{static custom(e){return e}static unique(e=7){let t=(function(e,t,a,r){if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return r})(ad,d,0,l).call(ad),a="";for(let t=0;t<e;t++)a+=Math.floor(16*Math.random()).toString(16);return t+a}}d=ad,l=function(){let e=new Date,t=Math.floor(e.getTime()/1e3),a=e.getMilliseconds();return t.toString(16)+a.toString(16).padStart(5,"0")},(u||(u={})).Totp="totp",function(e){e.Email="email",e.Phone="phone",e.Totp="totp",e.Recoverycode="recoverycode"}(c||(c={})),function(e){e.Amazon="amazon",e.Apple="apple",e.Auth0="auth0",e.Authentik="authentik",e.Autodesk="autodesk",e.Bitbucket="bitbucket",e.Bitly="bitly",e.Box="box",e.Dailymotion="dailymotion",e.Discord="discord",e.Disqus="disqus",e.Dropbox="dropbox",e.Etsy="etsy",e.Facebook="facebook",e.Figma="figma",e.Github="github",e.Gitlab="gitlab",e.Google="google",e.Linkedin="linkedin",e.Microsoft="microsoft",e.Notion="notion",e.Oidc="oidc",e.Okta="okta",e.Paypal="paypal",e.PaypalSandbox="paypalSandbox",e.Podio="podio",e.Salesforce="salesforce",e.Slack="slack",e.Spotify="spotify",e.Stripe="stripe",e.Tradeshift="tradeshift",e.TradeshiftBox="tradeshiftBox",e.Twitch="twitch",e.Wordpress="wordpress",e.Yahoo="yahoo",e.Yammer="yammer",e.Yandex="yandex",e.Zoho="zoho",e.Zoom="zoom",e.Mock="mock"}(h||(h={})),function(e){e.AvantBrowser="aa",e.AndroidWebViewBeta="an",e.GoogleChrome="ch",e.GoogleChromeIOS="ci",e.GoogleChromeMobile="cm",e.Chromium="cr",e.MozillaFirefox="ff",e.Safari="sf",e.MobileSafari="mf",e.MicrosoftEdge="ps",e.MicrosoftEdgeIOS="oi",e.OperaMini="om",e.Opera="op",e.OperaNext="on"}(p||(p={})),function(e){e.AmericanExpress="amex",e.Argencard="argencard",e.Cabal="cabal",e.Cencosud="cencosud",e.DinersClub="diners",e.Discover="discover",e.Elo="elo",e.Hipercard="hipercard",e.JCB="jcb",e.Mastercard="mastercard",e.Naranja="naranja",e.TarjetaShopping="targeta-shopping",e.UnionChinaPay="union-china-pay",e.Visa="visa",e.MIR="mir",e.Maestro="maestro",e.Rupay="rupay"}(m||(m={})),function(e){e.Afghanistan="af",e.Angola="ao",e.Albania="al",e.Andorra="ad",e.UnitedArabEmirates="ae",e.Argentina="ar",e.Armenia="am",e.AntiguaAndBarbuda="ag",e.Australia="au",e.Austria="at",e.Azerbaijan="az",e.Burundi="bi",e.Belgium="be",e.Benin="bj",e.BurkinaFaso="bf",e.Bangladesh="bd",e.Bulgaria="bg",e.Bahrain="bh",e.Bahamas="bs",e.BosniaAndHerzegovina="ba",e.Belarus="by",e.Belize="bz",e.Bolivia="bo",e.Brazil="br",e.Barbados="bb",e.BruneiDarussalam="bn",e.Bhutan="bt",e.Botswana="bw",e.CentralAfricanRepublic="cf",e.Canada="ca",e.Switzerland="ch",e.Chile="cl",e.China="cn",e.CoteDIvoire="ci",e.Cameroon="cm",e.DemocraticRepublicOfTheCongo="cd",e.RepublicOfTheCongo="cg",e.Colombia="co",e.Comoros="km",e.CapeVerde="cv",e.CostaRica="cr",e.Cuba="cu",e.Cyprus="cy",e.CzechRepublic="cz",e.Germany="de",e.Djibouti="dj",e.Dominica="dm",e.Denmark="dk",e.DominicanRepublic="do",e.Algeria="dz",e.Ecuador="ec",e.Egypt="eg",e.Eritrea="er",e.Spain="es",e.Estonia="ee",e.Ethiopia="et",e.Finland="fi",e.Fiji="fj",e.France="fr",e.MicronesiaFederatedStatesOf="fm",e.Gabon="ga",e.UnitedKingdom="gb",e.Georgia="ge",e.Ghana="gh",e.Guinea="gn",e.Gambia="gm",e.GuineaBissau="gw",e.EquatorialGuinea="gq",e.Greece="gr",e.Grenada="gd",e.Guatemala="gt",e.Guyana="gy",e.Honduras="hn",e.Croatia="hr",e.Haiti="ht",e.Hungary="hu",e.Indonesia="id",e.India="in",e.Ireland="ie",e.IranIslamicRepublicOf="ir",e.Iraq="iq",e.Iceland="is",e.Israel="il",e.Italy="it",e.Jamaica="jm",e.Jordan="jo",e.Japan="jp",e.Kazakhstan="kz",e.Kenya="ke",e.Kyrgyzstan="kg",e.Cambodia="kh",e.Kiribati="ki",e.SaintKittsAndNevis="kn",e.SouthKorea="kr",e.Kuwait="kw",e.LaoPeopleSDemocraticRepublic="la",e.Lebanon="lb",e.Liberia="lr",e.Libya="ly",e.SaintLucia="lc",e.Liechtenstein="li",e.SriLanka="lk",e.Lesotho="ls",e.Lithuania="lt",e.Luxembourg="lu",e.Latvia="lv",e.Morocco="ma",e.Monaco="mc",e.Moldova="md",e.Madagascar="mg",e.Maldives="mv",e.Mexico="mx",e.MarshallIslands="mh",e.NorthMacedonia="mk",e.Mali="ml",e.Malta="mt",e.Myanmar="mm",e.Montenegro="me",e.Mongolia="mn",e.Mozambique="mz",e.Mauritania="mr",e.Mauritius="mu",e.Malawi="mw",e.Malaysia="my",e.Namibia="na",e.Niger="ne",e.Nigeria="ng",e.Nicaragua="ni",e.Netherlands="nl",e.Norway="no",e.Nepal="np",e.Nauru="nr",e.NewZealand="nz",e.Oman="om",e.Pakistan="pk",e.Panama="pa",e.Peru="pe",e.Philippines="ph",e.Palau="pw",e.PapuaNewGuinea="pg",e.Poland="pl",e.FrenchPolynesia="pf",e.NorthKorea="kp",e.Portugal="pt",e.Paraguay="py",e.Qatar="qa",e.Romania="ro",e.Russia="ru",e.Rwanda="rw",e.SaudiArabia="sa",e.Sudan="sd",e.Senegal="sn",e.Singapore="sg",e.SolomonIslands="sb",e.SierraLeone="sl",e.ElSalvador="sv",e.SanMarino="sm",e.Somalia="so",e.Serbia="rs",e.SouthSudan="ss",e.SaoTomeAndPrincipe="st",e.Suriname="sr",e.Slovakia="sk",e.Slovenia="si",e.Sweden="se",e.Eswatini="sz",e.Seychelles="sc",e.Syria="sy",e.Chad="td",e.Togo="tg",e.Thailand="th",e.Tajikistan="tj",e.Turkmenistan="tm",e.TimorLeste="tl",e.Tonga="to",e.TrinidadAndTobago="tt",e.Tunisia="tn",e.Turkey="tr",e.Tuvalu="tv",e.Tanzania="tz",e.Uganda="ug",e.Ukraine="ua",e.Uruguay="uy",e.UnitedStates="us",e.Uzbekistan="uz",e.VaticanCity="va",e.SaintVincentAndTheGrenadines="vc",e.Venezuela="ve",e.Vietnam="vn",e.Vanuatu="vu",e.Samoa="ws",e.Yemen="ye",e.SouthAfrica="za",e.Zambia="zm",e.Zimbabwe="zw"}(f||(f={})),function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.PATCH="PATCH",e.DELETE="DELETE",e.OPTIONS="OPTIONS"}(g||(g={})),function(e){e.Center="center",e.Topleft="top-left",e.Top="top",e.Topright="top-right",e.Left="left",e.Right="right",e.Bottomleft="bottom-left",e.Bottom="bottom",e.Bottomright="bottom-right"}(y||(y={})),function(e){e.Jpg="jpg",e.Jpeg="jpeg",e.Gif="gif",e.Png="png",e.Webp="webp",e.Heic="heic",e.Avif="avif"}(v||(v={}));let al=new an(new as().setEndpoint("https://fra.cloud.appwrite.io/v1").setProject("68093d3e003a1ba38e6c")),au=async(e,t,a)=>{try{return await al.createDocument("68093ed10019154f2b1a","680fe7e500341e5f0277",ad.unique(),{callerId:e,receiverId:t,offer:a,status:"pending"})}catch(e){throw console.error("Error creating call:",e),e}},ac=new ek;ac.post("/",async e=>{let{callerId:t,receiverId:a,offer:r}=await e.req.json();try{return await au(t,a,r),e.json({message:"Call created successfully"},200)}catch(t){return e.json({message:"Error creating call"},500)}});var ah=a(1966);!function(e){e.ADMIN="ADMIN",e.MEMBER="MEMBER"}(w||(w={}));let ap=async({databases:e,workspaceId:t,userId:a})=>(await e.listDocuments(ah.Eo,ah.Ud,[t2.AE.equal("workspaceId",t),t2.AE.equal("userId",a)])).documents[0],am=new ek().get("/",t7,t9("query",t0({workspaceId:tY()})),async e=>{let{users:t}=await (0,t8.i)(),a=e.get("databases"),r=e.get("user"),{workspaceId:s}=e.req.valid("query");if(!await ap({databases:a,workspaceId:s,userId:r.$id}))return e.json({error:"Unauthorized."},401);let i=await a.listDocuments(ah.Eo,ah.Ud,[t2.AE.equal("workspaceId",s)]),n=await Promise.all(i.documents.map(async e=>{let a=await t.get(e.userId);return{...e,name:a.name,email:a.email}}));return e.json({data:{...i,documents:n}})}).delete("/:memberId",t7,async e=>{let{memberId:t}=e.req.param(),a=e.get("user"),r=e.get("databases"),s=await r.getDocument(ah.Eo,ah.Ud,t);if(1===(await r.listDocuments(ah.Eo,ah.Ud,[t2.AE.equal("workspaceId",s.workspaceId)])).total)return e.json({error:"Cannot delete the only member."},400);let i=await ap({databases:r,workspaceId:s.workspaceId,userId:a.$id});return i&&(i.$id===s.$id||i.role===w.ADMIN)?(await r.deleteDocument(ah.Eo,ah.Ud,t),e.json({data:{$id:s.$id,workspaceId:s.workspaceId}})):e.json({error:"Unauthorized."},401)}).patch("/:memberId",t7,t9("json",t0({role:t4(w)})),async e=>{let{memberId:t}=e.req.param(),{role:a}=e.req.valid("json"),r=e.get("user"),s=e.get("databases"),i=await s.getDocument(ah.Eo,ah.Ud,t);if(1===(await s.listDocuments(ah.Eo,ah.Ud,[t2.AE.equal("workspaceId",i.workspaceId)])).total)return e.json({error:"Cannot downgrade the only member."},400);let n=await ap({databases:s,workspaceId:i.workspaceId,userId:r.$id});return n&&n.role===w.ADMIN?(await s.updateDocument(ah.Eo,ah.Ud,t,{role:a}),e.json({data:{$id:i.$id,workspaceId:i.workspaceId}})):e.json({error:"Unauthorized."},401)}),af=Symbol.for("constructDateFrom");function ag(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&af in e?e[af](t):e instanceof Date?new e.constructor(t):new Date(t)}function ay(e,t){let a=ag(t?.in||e,e);return a.setDate(1),a.setHours(0,0,0,0),a}function av(e,t){let a=ag(t?.in||e,e),r=a.getMonth();return a.setFullYear(a.getFullYear(),r+1,0),a.setHours(23,59,59,999),a}function aw(e,t,a){return function(e,t,a){let r=ag(a?.in||e,e);if(isNaN(t))return ag(a?.in||e,NaN);if(!t)return r;let s=r.getDate(),i=ag(a?.in||e,r.getTime());return(i.setMonth(r.getMonth()+t+1,0),s>=i.getDate())?i:(r.setFullYear(i.getFullYear(),i.getMonth(),s),r)}(e,-t,a)}let a_=t0({name:tY().trim().min(1,"Project name is required."),image:t1([tJ(File),tY().transform(e=>""===e?void 0:e)]).optional(),workspaceId:tY({message:"Workspace id is required."})}),ab=t0({name:tY().trim().min(1,"Project name is required.").optional(),image:t1([tJ(File),tY().transform(e=>""===e?void 0:e)]).optional(),workspaceId:tY({message:"Workspace id is required."})});!function(e){e.BACKLOG="BACKLOG",e.TODO="TODO",e.IN_PROGRESS="IN_PROGRESS",e.IN_REVIEW="IN_REVIEW",e.DONE="DONE"}(_||(_={}));let ak=new ek().post("/",t7,t9("form",a_),async e=>{let t;let a=e.get("databases"),r=e.get("storage"),s=e.get("user"),{name:i,image:n,workspaceId:o}=e.req.valid("form");if(!await ap({databases:a,workspaceId:o,userId:s.$id}))return e.json({error:"Unauthorized."},401);if(n instanceof File){let e=n.name.split(".").at(-1)??"png",a=new File([n],`${t2.ID.unique()}.${e}`,{type:n.type});t=(await r.createFile(ah.DB,t2.ID.unique(),a)).$id}else t=n;let d=await a.createDocument(ah.Eo,ah.z5,t2.ID.unique(),{name:i,imageId:t,workspaceId:o});return e.json({data:d})}).get("/",t7,t9("query",t0({workspaceId:tY()})),async e=>{let t=e.get("user"),a=e.get("databases"),r=e.get("storage"),{workspaceId:s}=e.req.valid("query");if(!await ap({databases:a,workspaceId:s,userId:t.$id}))return e.json({error:"Unauthorized."},401);let i=await a.listDocuments(ah.Eo,ah.z5,[t2.AE.equal("workspaceId",s),t2.AE.orderDesc("$createdAt")]),n=await Promise.all(i.documents.map(async e=>{let t;if(e.imageId){let a=await r.getFileView(ah.DB,e.imageId);t=`data:image/png;base64,${Buffer.from(a).toString("base64")}`}return{...e,imageUrl:t}}));return e.json({data:{documents:n,total:i.total}})}).get("/:projectId",t7,async e=>{let t;let a=e.get("user"),r=e.get("databases"),s=e.get("storage"),{projectId:i}=e.req.param(),n=await r.getDocument(ah.Eo,ah.z5,i);if(!await ap({databases:r,workspaceId:n.workspaceId,userId:a.$id}))return e.json({error:"Unauthorized."},401);if(n.imageId){let e=await s.getFileView(ah.DB,n.imageId);t=`data:image/png;base64,${Buffer.from(e).toString("base64")}`}return e.json({data:{...n,imageUrl:t}})}).patch("/:projectId",t7,t9("form",ab),async e=>{let t;let a=e.get("databases"),r=e.get("storage"),s=e.get("user"),{projectId:i}=e.req.param(),{name:n,image:o}=e.req.valid("form"),d=await a.getDocument(ah.Eo,ah.z5,i);if(!await ap({databases:a,workspaceId:d.workspaceId,userId:s.$id}))return e.json({error:"Unauthorized."},401);if(o instanceof File){let e=o.name.split(".").at(-1)??"png",a=new File([o],`${t2.ID.unique()}.${e}`,{type:o.type}),s=await r.createFile(ah.DB,t2.ID.unique(),a);d.imageId&&await r.deleteFile(ah.DB,d.imageId),t=s.$id}let l=await a.updateDocument(ah.Eo,ah.z5,i,{name:n,imageId:t});return e.json({data:l})}).delete("/:projectId",t7,async e=>{let t=e.get("databases"),a=e.get("storage"),r=e.get("user"),{projectId:s}=e.req.param(),i=await t.getDocument(ah.Eo,ah.z5,s);if(!await ap({databases:t,workspaceId:i.workspaceId,userId:r.$id}))return e.json({error:"Unauthorized."},401);for(let e of(await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("projectId",s)])).documents)await t.deleteDocument(ah.Eo,ah.TW,e.$id);return i.imageId&&await a.deleteFile(ah.DB,i.imageId),await t.deleteDocument(ah.Eo,ah.z5,s),e.json({data:{$id:i.$id,workspaceId:i.workspaceId}})}).get("/:projectId/analytics",t7,async e=>{let t=e.get("databases"),a=e.get("user"),{projectId:r}=e.req.param(),s=await t.getDocument(ah.Eo,ah.z5,r),i=await ap({databases:t,workspaceId:s.workspaceId,userId:a.$id});if(!i)return e.json({error:"Unauthorized."},401);let n=new Date,o=ay(n),d=av(n),l=ay(aw(n,1)),u=av(aw(n,1)),c=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("projectId",r),t2.AE.greaterThanEqual("$createdAt",o.toISOString()),t2.AE.lessThanEqual("$createdAt",d.toISOString())]),h=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("projectId",r),t2.AE.greaterThanEqual("$createdAt",l.toISOString()),t2.AE.lessThanEqual("$createdAt",u.toISOString())]),p=c.total,m=p-h.total,f=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("projectId",r),t2.AE.equal("assigneeId",i.$id),t2.AE.greaterThanEqual("$createdAt",o.toISOString()),t2.AE.lessThanEqual("$createdAt",d.toISOString())]),g=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("projectId",r),t2.AE.equal("assigneeId",i.$id),t2.AE.greaterThanEqual("$createdAt",l.toISOString()),t2.AE.lessThanEqual("$createdAt",u.toISOString())]),y=f.total,v=y-g.total,w=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("projectId",r),t2.AE.notEqual("status",_.DONE),t2.AE.greaterThanEqual("$createdAt",o.toISOString()),t2.AE.lessThanEqual("$createdAt",d.toISOString())]),b=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("projectId",r),t2.AE.notEqual("status",_.DONE),t2.AE.greaterThanEqual("$createdAt",l.toISOString()),t2.AE.lessThanEqual("$createdAt",u.toISOString())]),k=w.total,E=k-b.total,x=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("projectId",r),t2.AE.equal("status",_.DONE),t2.AE.greaterThanEqual("$createdAt",o.toISOString()),t2.AE.lessThanEqual("$createdAt",d.toISOString())]),I=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("projectId",r),t2.AE.notEqual("status",_.DONE),t2.AE.greaterThanEqual("$createdAt",l.toISOString()),t2.AE.lessThanEqual("$createdAt",u.toISOString())]),A=x.total,S=A-I.total,j=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("projectId",r),t2.AE.notEqual("status",_.DONE),t2.AE.lessThan("dueDate",n.toISOString()),t2.AE.greaterThanEqual("$createdAt",o.toISOString()),t2.AE.lessThanEqual("$createdAt",d.toISOString())]),O=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("projectId",r),t2.AE.notEqual("status",_.DONE),t2.AE.lessThan("dueDate",n.toISOString()),t2.AE.greaterThanEqual("$createdAt",l.toISOString()),t2.AE.lessThanEqual("$createdAt",u.toISOString())]),T=j.total,q=T-O.total;return e.json({data:{taskCount:p,taskDifference:m,assignedTaskCount:y,assignedTaskDifference:v,completedTaskCount:A,completedTaskDifference:S,incompleteTaskCount:k,incompleteTaskDifference:E,overdueTaskCount:T,overdueTaskDifference:q}})}),aE=t0({name:tY().trim().min(1,"Task name is required."),status:t4(_,{required_error:"Task status is required."}),workspaceId:tY().trim().min(1,"Workspace id is required."),projectId:tY().trim().min(1,"Project id is required."),dueDate:({string:e=>tc.create({...e,coerce:!0}),number:e=>th.create({...e,coerce:!0}),boolean:e=>tm.create({...e,coerce:!0}),bigint:e=>tp.create({...e,coerce:!0}),date:e=>tf.create({...e,coerce:!0})}).date(),assigneeId:tY().trim().min(1,"Assignee id is required."),description:tY().optional()}),ax=new ek().get("/",t7,t9("query",t0({workspaceId:tY(),projectId:tY().nullish(),assigneeId:tY().nullish(),status:t4(_).nullish(),search:tY().nullish(),dueDate:tY().nullish()})),async e=>{let{users:t}=await (0,t8.i)(),a=e.get("databases"),r=e.get("storage"),s=e.get("user"),{workspaceId:i,projectId:n,assigneeId:o,status:d,search:l,dueDate:u}=e.req.valid("query");if(!await ap({databases:a,workspaceId:i,userId:s.$id}))return e.json({error:"Unauthorized."},401);let c=[t2.AE.equal("workspaceId",i),t2.AE.orderDesc("$createdAt")];n&&c.push(t2.AE.equal("projectId",n)),d&&c.push(t2.AE.equal("status",d)),o&&c.push(t2.AE.equal("assigneeId",o)),u&&c.push(t2.AE.equal("dueDate",u)),l&&c.push(t2.AE.search("name",l));let h=await a.listDocuments(ah.Eo,ah.TW,c),p=h.documents.map(e=>e.projectId),m=h.documents.map(e=>e.assigneeId),f=await a.listDocuments(ah.Eo,ah.z5,p.length>0?[t2.AE.contains("$id",p)]:[]),g=await a.listDocuments(ah.Eo,ah.Ud,m.length>0?[t2.AE.contains("$id",m)]:[]),y=await Promise.all(g.documents.map(async e=>{let a=await t.get(e.userId);return{...e,name:a.name,email:a.email}})),v=await Promise.all(h.documents.map(async e=>{let t;let a=f.documents.find(t=>t.$id===e.projectId),s=y.find(t=>t.$id===e.assigneeId);if(a?.imageId){let e=await r.getFileView(ah.DB,a.imageId);t=`data:image/png;base64,${Buffer.from(e).toString("base64")}`}return{...e,project:{...a,imageUrl:t},assignee:s}}));return e.json({data:{...h,documents:v}})}).get("/:taskId",t7,async e=>{let{taskId:t}=e.req.param(),a=e.get("user"),r=e.get("databases"),{users:s}=await (0,t8.i)(),i=await r.getDocument(ah.Eo,ah.TW,t);if(!await ap({databases:r,workspaceId:i.workspaceId,userId:a.$id}))return e.json({error:"Unauthorized."},401);let n=await r.getDocument(ah.Eo,ah.z5,i.projectId),o=await r.getDocument(ah.Eo,ah.Ud,i.assigneeId),d=await s.get(o.userId),l={...o,name:d.name,email:d.email};return e.json({data:{...i,project:n,assignee:l}})}).post("/",t7,t9("json",aE),async e=>{let t=e.get("user"),a=e.get("databases"),{name:r,status:s,workspaceId:i,projectId:n,dueDate:o,assigneeId:d}=e.req.valid("json");if(!await ap({databases:a,workspaceId:i,userId:t.$id}))return e.json({error:"Unauthorized."},401);let l=await a.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("status",s),t2.AE.equal("workspaceId",i),t2.AE.orderAsc("position"),t2.AE.limit(1)]),u=l.documents.length>0?l.documents[0].position+1e3:1e3,c=await a.createDocument(ah.Eo,ah.TW,t2.ID.unique(),{name:r,status:s,workspaceId:i,projectId:n,dueDate:o,assigneeId:d,position:u});return e.json({data:c})}).patch("/:taskId",t7,t9("json",aE.partial()),async e=>{let t=e.get("user"),a=e.get("databases"),{name:r,status:s,description:i,projectId:n,dueDate:o,assigneeId:d}=e.req.valid("json"),{taskId:l}=e.req.param(),u=await a.getDocument(ah.Eo,ah.TW,l);if(!await ap({databases:a,workspaceId:u.workspaceId,userId:t.$id}))return e.json({error:"Unauthorized."},401);let c=await a.updateDocument(ah.Eo,ah.TW,l,{name:r,status:s,projectId:n,dueDate:o,assigneeId:d,description:i});return e.json({data:c})}).post("/bulk-update",t7,t9("json",t0({tasks:tQ(t0({$id:tY(),status:t4(_),position:tX().int().positive().min(1e3).max(1e5)}))})),async e=>{let t=e.get("databases"),a=e.get("user"),{tasks:r}=e.req.valid("json"),s=new Set((await t.listDocuments(ah.Eo,ah.TW,[t2.AE.contains("$id",r.map(e=>e.$id))])).documents.map(e=>e.workspaceId));if(1!==s.size)return e.json({error:"All tasks must belong to the same workspace."},401);let i=s.values().next().value;if(!await ap({databases:t,workspaceId:i,userId:a.$id}))return e.json({error:"Unauthorized."},401);let n=await Promise.all(r.map(async e=>{let{$id:a,status:r,position:s}=e;return t.updateDocument(ah.Eo,ah.TW,a,{status:r,position:s})}));return e.json({data:{updatedTasks:n,workspaceId:i}})}).delete("/:taskId",t7,async e=>{let t=e.get("user"),a=e.get("databases"),{taskId:r}=e.req.param(),s=await a.getDocument(ah.Eo,ah.TW,r);return await ap({databases:a,workspaceId:s.workspaceId,userId:t.$id})?(await a.deleteDocument(ah.Eo,ah.TW,r),e.json({data:s})):e.json({error:"Unauthorized."},401)}),aI=t0({name:tY().trim().min(1,"Workspace name is required."),image:t1([tJ(File),tY().transform(e=>""===e?void 0:e)]).optional()}),aA=t0({name:tY().trim().min(1,"Workspace name must be 1 or more characters.").optional(),image:t1([tJ(File),tY().transform(e=>""===e?void 0:e)]).optional()});var aS=a(39812);let aj=new ek().get("/",t7,async e=>{let t=e.get("databases"),a=e.get("user"),r=e.get("storage"),s=await t.listDocuments(ah.Eo,ah.Ud,[t2.AE.equal("userId",a.$id)]);if(0===s.total)return e.json({data:{documents:[],total:0}});let i=s.documents.map(e=>e.workspaceId),n=await t.listDocuments(ah.Eo,ah.u4,[t2.AE.contains("$id",i),t2.AE.orderDesc("$createdAt")]),o=await Promise.all(n.documents.map(async e=>{let t;if(e.imageId){let a=await r.getFileView(ah.DB,e.imageId);t=`data:image/png;base64,${Buffer.from(a).toString("base64")}`}return{...e,imageUrl:t}}));return e.json({data:{documents:o,total:n.total}})}).post("/",t9("form",aI),t7,async e=>{let t;let a=e.get("databases"),r=e.get("storage"),s=e.get("user"),{name:i,image:n}=e.req.valid("form");if(n instanceof File){let e=n.name.split(".").at(-1)??"png",a=new File([n],`${t2.ID.unique()}.${e}`,{type:n.type});t=(await r.createFile(ah.DB,t2.ID.unique(),a)).$id}else t=n;let o=await a.createDocument(ah.Eo,ah.u4,t2.ID.unique(),{name:i,userId:s.$id,imageId:t,inviteCode:(0,aS.v)(6)});return await a.createDocument(ah.Eo,ah.Ud,t2.ID.unique(),{userId:s.$id,workspaceId:o.$id,role:w.ADMIN}),e.json({data:o})}).get("/:workspaceId",t7,async e=>{let t;let a=e.get("user"),r=e.get("databases"),s=e.get("storage"),{workspaceId:i}=e.req.param();if(!await ap({databases:r,workspaceId:i,userId:a.$id}))return e.json({error:"Unauthorized."},401);let n=await r.getDocument(ah.Eo,ah.u4,i);if(n.imageId){let e=await s.getFileView(ah.DB,n.imageId);t=`data:image/png;base64,${Buffer.from(e).toString("base64")}`}return e.json({data:{...n,imageUrl:t}})}).get("/:workspaceId/info",t7,async e=>{let t=e.get("databases"),{workspaceId:a}=e.req.param(),r=await t.getDocument(ah.Eo,ah.u4,a);return e.json({data:{$id:r.$id,name:r.name}})}).patch("/:workspaceId",t7,t9("form",aA),async e=>{let t;let a=e.get("databases"),r=e.get("storage"),s=e.get("user"),{workspaceId:i}=e.req.param(),{name:n,image:o}=e.req.valid("form"),d=await a.getDocument(ah.Eo,ah.u4,i),l=await ap({databases:a,workspaceId:i,userId:s.$id});if(!l||l.role!==w.ADMIN)return e.json({error:"Unauthorized."},401);if(o instanceof File){let e=o.name.split(".").at(-1)??"png",a=new File([o],`${t2.ID.unique()}.${e}`,{type:o.type}),s=await r.createFile(ah.DB,t2.ID.unique(),a);d.imageId&&await r.deleteFile(ah.DB,d.imageId),t=s.$id}let u=await a.updateDocument(ah.Eo,ah.u4,i,{name:n,imageId:t});return e.json({data:u})}).delete("/:workspaceId",t7,async e=>{let t=e.get("databases"),a=e.get("storage"),r=e.get("user"),{workspaceId:s}=e.req.param(),i=await ap({databases:t,workspaceId:s,userId:r.$id});if(!i||i.role!==w.ADMIN)return e.json({error:"Unauthorized."},401);let n=await t.getDocument(ah.Eo,ah.u4,s),o=await t.listDocuments(ah.Eo,ah.Ud,[t2.AE.equal("workspaceId",s)]),d=await t.listDocuments(ah.Eo,ah.z5,[t2.AE.equal("workspaceId",s)]),l=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("workspaceId",s)]);for(let e of o.documents)await t.deleteDocument(ah.Eo,ah.Ud,e.$id);for(let e of d.documents)e.imageId&&await a.deleteFile(ah.DB,e.imageId),await t.deleteDocument(ah.Eo,ah.z5,e.$id);for(let e of l.documents)await t.deleteDocument(ah.Eo,ah.TW,e.$id);return n.imageId&&a.deleteFile(ah.DB,n.imageId),await t.deleteDocument(ah.Eo,ah.u4,s),e.json({data:{$id:s}})}).post("/:workspaceId/resetInviteCode",t7,async e=>{let t=e.get("databases"),a=e.get("user"),{workspaceId:r}=e.req.param(),s=await ap({databases:t,workspaceId:r,userId:a.$id});if(!s||s.role!==w.ADMIN)return e.json({error:"Unauthorized."},401);let i=await t.updateDocument(ah.Eo,ah.u4,r,{inviteCode:(0,aS.v)(6)});return e.json({data:i})}).post("/:workspaceId/join",t7,t9("json",t0({code:tY()})),async e=>{let{workspaceId:t}=e.req.param(),{code:a}=e.req.valid("json"),r=e.get("databases"),s=e.get("user");if(await ap({databases:r,workspaceId:t,userId:s.$id}))return e.json({error:"Already a member."},400);let i=await r.getDocument(ah.Eo,ah.u4,t);return i.inviteCode!==a?e.json({error:"Invalid invite code."},400):(await r.createDocument(ah.Eo,ah.Ud,t2.ID.unique(),{workspaceId:t,userId:s.$id,role:w.MEMBER}),e.json({data:i}))}).get("/:workspaceId/analytics",t7,async e=>{let t=e.get("databases"),a=e.get("user"),{workspaceId:r}=e.req.param(),s=await ap({databases:t,workspaceId:r,userId:a.$id});if(!s)return e.json({error:"Unauthorized."},401);let i=new Date,n=ay(i),o=av(i),d=ay(aw(i,1)),l=av(aw(i,1)),u=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("workspaceId",r),t2.AE.greaterThanEqual("$createdAt",n.toISOString()),t2.AE.lessThanEqual("$createdAt",o.toISOString())]),c=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("workspaceId",r),t2.AE.greaterThanEqual("$createdAt",d.toISOString()),t2.AE.lessThanEqual("$createdAt",l.toISOString())]),h=u.total,p=h-c.total,m=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("workspaceId",r),t2.AE.equal("assigneeId",s.$id),t2.AE.greaterThanEqual("$createdAt",n.toISOString()),t2.AE.lessThanEqual("$createdAt",o.toISOString())]),f=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("workspaceId",r),t2.AE.equal("assigneeId",s.$id),t2.AE.greaterThanEqual("$createdAt",d.toISOString()),t2.AE.lessThanEqual("$createdAt",l.toISOString())]),g=m.total,y=g-f.total,v=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("workspaceId",r),t2.AE.notEqual("status",_.DONE),t2.AE.greaterThanEqual("$createdAt",n.toISOString()),t2.AE.lessThanEqual("$createdAt",o.toISOString())]),w=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("workspaceId",r),t2.AE.notEqual("status",_.DONE),t2.AE.greaterThanEqual("$createdAt",d.toISOString()),t2.AE.lessThanEqual("$createdAt",l.toISOString())]),b=v.total,k=b-w.total,E=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("workspaceId",r),t2.AE.equal("status",_.DONE),t2.AE.greaterThanEqual("$createdAt",n.toISOString()),t2.AE.lessThanEqual("$createdAt",o.toISOString())]),x=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("workspaceId",r),t2.AE.notEqual("status",_.DONE),t2.AE.greaterThanEqual("$createdAt",d.toISOString()),t2.AE.lessThanEqual("$createdAt",l.toISOString())]),I=E.total,A=I-x.total,S=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("workspaceId",r),t2.AE.notEqual("status",_.DONE),t2.AE.lessThan("dueDate",i.toISOString()),t2.AE.greaterThanEqual("$createdAt",n.toISOString()),t2.AE.lessThanEqual("$createdAt",o.toISOString())]),j=await t.listDocuments(ah.Eo,ah.TW,[t2.AE.equal("workspaceId",r),t2.AE.notEqual("status",_.DONE),t2.AE.lessThan("dueDate",i.toISOString()),t2.AE.greaterThanEqual("$createdAt",d.toISOString()),t2.AE.lessThanEqual("$createdAt",l.toISOString())]),O=S.total,T=O-j.total;return e.json({data:{taskCount:h,taskDifference:p,assignedTaskCount:g,assignedTaskDifference:y,completedTaskCount:I,completedTaskDifference:A,incompleteTaskCount:b,incompleteTaskDifference:k,overdueTaskCount:O,overdueTaskDifference:T}})}),aO="nodejs",aT=new ek().basePath("/api");aT.route("/auth",ae).route("/members",am).route("/projects",ak).route("/tasks",ax).route("/workspaces",aj).route("/calls",ac);let aq=eE(aT),a$=eE(aT),aD=eE(aT),aC=eE(aT),aR=new k.AppRouteRouteModule({definition:{kind:E.x.APP_ROUTE,page:"/api/[[...route]]/route",pathname:"/api/[[...route]]",filename:"route",bundlePath:"app/api/[[...route]]/route"},resolvedPagePath:"C:\\Users\\sanke\\Desktop\\ezyZip\\src\\app\\api\\[[...route]]\\route.ts",nextConfigOutput:"",userland:b}),{requestAsyncStorage:aN,staticGenerationAsyncStorage:aP,serverHooks:aZ}=aR,aM="/api/[[...route]]/route";function aF(){return(0,x.patchFetch)({serverHooks:aZ,staticGenerationAsyncStorage:aP})}},73278:(e,t,a)=>{e.exports=a(30517)},1966:(e,t,a)=>{a.d(t,{DB:()=>d,Eo:()=>r,TW:()=>n,Ud:()=>s,u4:()=>o,z5:()=>i});let r="68093ed10019154f2b1a",s="68093f080021826b445c",i="68093f19002b97596be1",n="68093f2300077442efb7",o="68093f2f001cd5ab3360",d="68093e2b0024cb3d5b12"},41073:(e,t,a)=>{a.d(t,{V:()=>r});let r="teamorbit-session"},24074:(e,t,a)=>{a.d(t,{O:()=>n,i:()=>o});var r=a(52845),s=a(57004),i=a(41073);async function n(){let e=new s.KU().setEndpoint("https://fra.cloud.appwrite.io/v1").setProject("68093d3e003a1ba38e6c"),t=(0,r.cookies)().get(i.V);if(!t||!t.value)throw Error("Unauthorized.");return e.setSession(t.value),{get account(){return new s.mR(e)},get databases(){return new s.Lg(e)},get storage(){return new s.Ke(e)}}}async function o(){let e=new s.KU().setEndpoint("https://fra.cloud.appwrite.io/v1").setProject("68093d3e003a1ba38e6c").setKey(process.env.NEXT_APPWRITE_KEY);return{get account(){return new s.mR(e)},get users(){return new s.Q(e)}}}},39812:(e,t,a)=>{a.d(t,{cn:()=>i,v:()=>n});var r=a(36272),s=a(51472);function i(...e){return(0,s.m6)((0,r.W)(e))}function n(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a="";for(let r=0;r<e;r++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[379,674,434],()=>a(97949));module.exports=r})();